{"version":3,"sources":["webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.init.ts","webpack:///src/app/app.module.ts","webpack:///src/app/pages/about/about.component.ts","webpack:///src/app/pages/about/about.component.html","webpack:///src/app/pages/create-user-callback/create-user-callback.component.ts","webpack:///src/app/pages/create-user-callback/create-user-callback.component.html","webpack:///src/app/pages/disclaimer/disclaimer.component.ts","webpack:///src/app/pages/disclaimer/disclaimer.component.html","webpack:///src/app/pages/field-definition-edit/field-definition-edit.component.ts","webpack:///src/app/pages/field-definition-edit/field-definition-edit.component.html","webpack:///src/app/pages/field-definition-list/field-definition-list.component.ts","webpack:///src/app/pages/field-definition-list/field-definition-list.component.html","webpack:///src/app/pages/help/help.component.ts","webpack:///src/app/pages/help/help.component.html","webpack:///src/app/pages/home/home-index/home-index.component.ts","webpack:///src/app/pages/home/home-index/home-index.component.html","webpack:///src/app/pages/login-callback/login-callback.component.ts","webpack:///src/app/pages/training/training.component.ts","webpack:///src/app/pages/training/training.component.html","webpack:///src/app/pages/user-detail/user-detail.component.ts","webpack:///src/app/pages/user-detail/user-detail.component.html","webpack:///src/app/pages/user-edit/user-edit.component.ts","webpack:///src/app/pages/user-edit/user-edit.component.html","webpack:///src/app/pages/user-invite/user-invite.component.ts","webpack:///src/app/pages/user-invite/user-invite.component.html","webpack:///src/app/pages/user-list/user-list.component.ts","webpack:///src/app/pages/user-list/user-list.component.html","webpack:///src/app/pages/watershed-detail/watershed-detail.component.ts","webpack:///src/app/pages/watershed-detail/watershed-detail.component.html","webpack:///src/app/pages/watershed-list/watershed-list.component.ts","webpack:///src/app/pages/watershed-list/watershed-list.component.html","webpack:///src/app/services/authentication.service.ts","webpack:///src/app/services/role/role.service.ts","webpack:///src/app/services/user/user.service.ts","webpack:///src/app/services/utility-functions.service.ts","webpack:///src/app/services/watershed/watershed.service.ts","webpack:///src/app/shared/components/ag-grid/fontawesome-icon-link-renderer/fontawesome-icon-link-renderer.component.ts","webpack:///src/app/shared/components/ag-grid/fontawesome-icon-link-renderer/fontawesome-icon-link-renderer.component.html","webpack:///src/app/shared/components/ag-grid/link-renderer/link-renderer.component.ts","webpack:///src/app/shared/components/ag-grid/link-renderer/link-renderer.component.html","webpack:///src/app/shared/components/ag-grid/multi-link-renderer/multi-link-renderer.component.ts","webpack:///src/app/shared/components/ag-grid/multi-link-renderer/multi-link-renderer.component.html","webpack:///src/app/shared/components/alert-display/alert-display.component.ts","webpack:///src/app/shared/components/alert-display/alert-display.component.html","webpack:///src/app/shared/components/combo-chart/combo-series-vertical.component.ts","webpack:///src/app/shared/components/custom-rich-text/custom-rich-text.component.ts","webpack:///src/app/shared/components/custom-rich-text/custom-rich-text.component.html","webpack:///src/app/shared/components/field-definition-grid-header/field-definition-grid-header.component.ts","webpack:///src/app/shared/components/field-definition-grid-header/field-definition-grid-header.component.html","webpack:///src/app/shared/components/field-definition/field-definition.component.ts","webpack:///src/app/shared/components/field-definition/field-definition.component.html","webpack:///src/app/shared/components/header-nav/header-nav.component.ts","webpack:///src/app/shared/components/header-nav/header-nav.component.html","webpack:///src/app/shared/components/index.ts","webpack:///src/app/shared/components/watershed-detail-popup/watershed-detail-popup.component.ts","webpack:///src/app/shared/components/watershed-detail-popup/watershed-detail-popup.component.html","webpack:///src/app/shared/components/watershed-map/watershed-map.component.ts","webpack:///src/app/shared/components/watershed-map/watershed-map.component.html","webpack:///src/app/shared/guards/acknowledged-disclaimer-guard.ts","webpack:///src/app/shared/guards/unauthenticated-access/manager-only-guard.ts","webpack:///src/app/shared/guards/unauthenticated-access/unauthenticated-access.guard.ts","webpack:///src/app/shared/interceptors/auth-interceptor.ts","webpack:///src/app/shared/interceptors/httpErrorInterceptor.ts","webpack:///src/app/shared/models/alert.ts","webpack:///src/app/shared/models/bounding-box-dto.ts","webpack:///src/app/shared/models/custom-rich-text-detailed-dto.ts","webpack:///src/app/shared/models/enums/alert-context.enum.ts","webpack:///src/app/shared/models/enums/custom-rich-text-type.enum.ts","webpack:///src/app/shared/models/enums/field-definition-type.enum.ts","webpack:///src/app/shared/models/enums/role.enum.ts","webpack:///src/app/shared/models/generated/custom-rich-text-dto.ts","webpack:///src/app/shared/models/user/user-create-dto.ts","webpack:///src/app/shared/models/user/user-invite-dto.ts","webpack:///src/app/shared/models/user/user-update-dto.ts","webpack:///src/app/shared/pages/index.ts","webpack:///src/app/shared/pages/not-found/not-found.component.ts","webpack:///src/app/shared/pages/not-found/not-found.component.html","webpack:///src/app/shared/pages/subscription-insufficient/subscription-insufficient.component.ts","webpack:///src/app/shared/pages/subscription-insufficient/subscription-insufficient.component.html","webpack:///src/app/shared/pages/unauthenticated/unauthenticated.component.ts","webpack:///src/app/shared/pages/unauthenticated/unauthenticated.component.html","webpack:///src/app/shared/services/alert.service.ts","webpack:///src/app/shared/services/api-route/api-route.service.ts","webpack:///src/app/shared/services/api/api.service.ts","webpack:///src/app/shared/services/app-insights.service.ts","webpack:///src/app/shared/services/busy/busy.service.ts","webpack:///src/app/shared/services/cookies/cookie-storage.service.ts","webpack:///src/app/shared/services/custom-compile.service.ts","webpack:///src/app/shared/services/custom-rich-text.service.ts","webpack:///src/app/shared/services/field-definition-service.ts","webpack:///src/app/shared/services/global-error-handler.service.ts","webpack:///src/app/shared/services/index.ts","webpack:///src/app/shared/services/wfs.service.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/environments/dynamic-environment.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","canActivate","AppRoutingModule","forRoot","imports","AppComponent","router","oauthService","cookieStorageService","busyService","authenticationService","titleService","_document","userClaimsUpsertStarted","ignoreSessionTerminated","currentYear","Date","getFullYear","events","subscribe","event","setBusy","window","scrollTo","configureAuthService","tryLogin","setTitle","leadOrganizationShortName","platformShortName","setAppFavicon","subject","configure","keystoneAuthConfiguration","setStorage","tokenValidationHandler","loadDiscoveryDocument","type","console","log","info","next","complete","warn","removeAll","asObservable","getElementById","setAttribute","faviconFilename","selector","templateUrl","styleUrls","HTMLDocument","AppInitService","fetch","response","json","pipe","config","redirectUri","location","origin","redirectUriRelative","postLogoutRedirectUri","toPromise","init_app","appLoadService","appInsightsService","init","appInsightsInstrumentationKey","initAppInsights","AppModule","provide","useFactory","deps","multi","useClass","withComponents","declarations","providers","entryComponents","bootstrap","AboutComponent","richTextTypeID","PlatformOverview","CreateUserCallbackComponent","login","DisclaimerComponent","userService","route","forced","Disclaimer","watchUserChangeSubscription","currentUserSetObservable","currentUser","queryParams","params","snapshot","paramMap","get","DisclaimerAcknowledgedDate","setDisclaimerAcknowledgedDate","UserID","x","refreshUserInfo","navigate","FieldDefinitionEditComponent","alertService","fieldDefinitionService","cdr","Editor","ckConfig","parseInt","getFieldDefinition","fieldDefinition","unsubscribe","dispose","detach","isUserAnAdministrator","editor","isLoadingSubmit","updateFieldDefinition","navigateByUrl","pushAlert","FieldDefinitionType","FieldDefinitionTypeDisplayName","Success","error","detectChanges","FieldDefinitionListComponent","LabelsAndDefinitionsList","rowData","fieldDefinitionsGrid","api","showLoadingOverlay","listAllFieldDefinitions","fieldDefinitions","hideOverlay","columnDefs","headerName","valueGetter","LinkValue","data","FieldDefinitionTypeID","LinkDisplay","cellRendererFramework","cellRendererParams","inRouterLink","filterValueGetter","FieldDefinitionDisplayName","comparator","id1","id2","link1","link2","sortable","filter","width","field","cellRenderer","FieldDefinitionValue","autoHeight","cellStyle","forEach","resizable","HelpComponent","Help","HomeIndexComponent","Homepage","localStorage","getItem","removeItem","Role","RoleID","Unassigned","Disabled","createAccount","keystoneSupportBaseUrl","platformLongName","leadOrganizationLongName","leadOrganizationHomeUrl","LoginCallbackComponent","TrainingComponent","Training","UserDetailComponent","routeReuseStrategy","shouldReuseRoute","getUserFromUserID","user","Array","changeDetection","OnPush","UserEditComponent","roleService","userID","getRoles","roles","sort","a","b","RoleDisplayName","model","ReceiveSupportEmails","editUserForm","updateUser","UserInviteComponent","result","UserGuid","userToInvite","Email","FirstName","LastName","indexOf","inviteUserForm","inviteUser","reset","UserListComponent","utilityFunctionsService","decimalPipe","usersGrid","getUsers","users","unassignedUsers","u","_decimalPipe","FullName","unassignedUsersGrid","refreshView","columnsKeys","columnApi","getAllDisplayedColumns","columnIds","columnName","getColId","push","splice","exportGridToCsv","exportToCsv","WatershedDetailComponent","watershedService","today","getWatershedByWatershedID","watershed","undefined","WatershedID","WatershedListComponent","WatershedList","watersheds","gridOptions","watershedsGrid","getWatersheds","WatershedName","headerComponentFramework","headerComponentParams","fieldDefinitionType","setRowData","map","m","AuthenticationService","_currentUserSetSubject","isAuthenticated","claims","getIdentityClaims","globalID","getUserObservable","getUserFromGlobalID","getUserCallback","status","Danger","clearAlerts","newUser","LoginName","createNewUser","hasValidAccessToken","logout","initImplicitFlow","setItem","redirectUrl","encodeURIComponent","createAccountRedirectUrl","href","createAccountUrl","logOut","setTimeout","role","Admin","providedIn","RoleService","apiService","getFromApi","UserService","userInviteDto","postToApi","userCreateDto","userUpdateDto","putToApi","UtilityFunctionsService","grid","fileName","columnKeys","skipHeader","columnGroups","skipFooters","skipGroups","skipPinnedTop","skipPinnedBottom","allColumns","onlySelected","suppressQuotes","processCellCallback","p","column","getColDef","value","DownloadDisplay","exportDataAsCsv","WatershedService","watershedID","watershedIDs","watershedIDListDto","FontAwesomeIconLinkRendererComponent","LinkRendererComponent","MultiLinkRendererComponent","links","AlertDisplayComponent","alerts","alertSubscription","alertSubject","alert","removeAlert","activate","deactivate","ComboSeriesVerticalComponent","tooltipDisabled","animations","noBarWhenZero","select","bandwidth","changes","update","series","length","xScale","emit","d0","total","d","reduce","sum","bars","index","label","name","formattedLabel","roundEdges","bar","height","y","Math","abs","yScale","offset0","offset1","toFixed","colors","scaleType","color","getColor","gradientStops","getLinearGradientStops","tooltipLabel","seriesName","getSeriesTooltips","seriesLine","lineValue","lineName","tooltipText","toLocaleString","entry","activeEntries","item","find","opacity","transform","template","CustomRichTextComponent","customRichTextService","sanitizer","isLoading","isEditing","isEmptyContent","mediaEmbed","previewsInData","getCustomRichText","customRichTextTypeID","customRichTextContent","bypassSecurityTrustHtml","CustomRichTextContent","IsEmptyContent","editedContent","plugins","createUploadAdapter","loader","isReadOnly","CkEditorUploadAdapter","apiHostName","updateDto","updateCustomRichText","uploadService","apiUrl","service","file","reject","uploadFile","imageUrl","FieldDefinitionGridHeaderComponent","elementRef","showMenu","minWidth","actualWidth","addEventListener","onSortChanged","bind","stopPropagation","showColumnMenu","querySelector","progressSort","shiftKey","isSortAscending","sorted","isSortDescending","nativeElement","onSortRequested","FieldDefinitionComponent","elem","emptyContent","loadFieldDefinition","labelOverride","isCurrentUserAnAdministrator","popover","close","open","closest","mouseLeaveEvent","hoveringPopover","HeaderNavComponent","windowWidth","innerWidth","isAdministrator","getUnassignedUserReport","report","Count","Info","USERS_AWAITING_CONFIGURATION","isUserUnassigned","isUserRoleDisabled","leadOrganizationLogoFilename","WatershedDetailPopupComponent","WatershedMapComponent","wfsService","appRef","compileService","mapID","selectedWatershedTransparencyStyle","selectedWatershedLabelStyle","selectedWatershedIDs","zoomMapToDefaultExtent","disableDefaultClick","displaywatershedsLayerOnLoad","mapHeight","defaultFitBoundsOptions","selectedWatershedLayerName","afterSetControl","afterLoadMap","onMapMoveEnd","tileLayers","overlayLayers","selectedWatershedLayerGroup","boundingBox","Left","Bottom","Right","Top","Object","assign","attribution","defaultWatershedsWMSOptions","layers","transparent","format","tiled","watershedsWMSOptions","wms","geoserverMapServiceUrl","selectedWatershedTransparencyLayer","selectedWatershedLabelLayer","layerControl","removeLayer","wmsParameters","styles","cql_filter","createWatershedMapFilter","addLayer","addOverlay","addTo","getBoundingBoxByWatershedIDs","fitBounds","join","mapOptions","minZoom","maxZoom","fullscreenControl","on","setControl","registerClickEvents","updateSelectedWatershedsOverlayLayer","fitBoundsToSelectedWatersheds","self","getWatershedByCoordinate","latlng","lng","lat","watershedFeatureCollection","features","feature","geometry","polygon","coordinates","coordinate","point","setLatLng","setContent","compile","c","instance","openOn","Layers","collapsed","leafletControlLayersSelector","closeButtonClass","closem","create","innerHTML","$","removeClass","append","AcknowledgedDisclaimerGuard","state","isCurrentUserNullOrUndefined","hasCurrentUserAcknowledgedDisclaimer","url","ManagerOnlyGuard","pushNotFoundUnauthorizedAlert","UnauthenticatedAccessGuard","token","sessionStorage","AuthInterceptor","injector","nextEvent","clone","headers","set","handle","HttpErrorInterceptor","request","message","replaceUrl","includes","Alert","context","Primary","dismissable","uniqueCode","BoundingBoxDto","obj","CustomRichTextDetailedDto","AlertContext","CustomRichTextType","FieldDefinitionTypeEnum","RoleEnum","CustomRichTextDto","UserCreateDto","UserInviteDto","UserUpdateDto","NotFoundComponent","SubscriptionInsufficientComponent","UnauthenticatedComponent","AlertService","some","NOT_FOUND_UNAUTHORIZED","ApiRouteService","programApiRoute","ApiService","apiRoute","http","relativeRoute","startsWith","substring","JSON","parse","stringify","requestCleaner","baseRoute","getRoute","post","handleResponse","handleError","put","supressErrorMessage","clearBusyGlobally","ProgressEvent","key","newLocal","fe","val","toString","version","AppInsightsService","appInsights","appId","enableAutoRouteTracking","disableFetchTracking","enableCorsCorrelation","enableRequestHeaderTracking","enableResponseHeaderTracking","correlationHeaderExcludedDomains","URL","hostname","instrumentationKey","maxAjaxCallsPerView","loadAppInsights","addTelemetryInitializer","baseData","responseCode","envelope","tags","clientId","BusyService","busySubject","show","text","startTime","performance","now","setTimeoutIntervalCheck","clearTimeoutInterval","timeoutInterval","setInterval","clearInterval","CookieStorageService","cookieService","deleteAll","CustomCompileService","resolver","onAttach","compFactory","resolveComponentFactory","compRef","attachView","hostView","onDestroy","detachView","div","document","createElement","appendChild","CustomRichTextService","httpClient","clientFilename","mimeType","FieldDefinitionService","fieldDefinitionTypeID","GlobalErrorHandlerService","trackException","exception","originalError","WfsService","getWatershedIDsIntersectingUnsubscribe","longitude","latitude","outputFormat","SrsName","typeName","lon1","lon2","lat1","lat2","responseType","valueReference","rawData","watershedIDNodes","DOMParser","parseFromString","getElementsByTagName","i","SharedModule","ngModule","DynamicEnvironment","_production","production","staging","dev","Environment","environment","bootstrapModule","err"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { NotFoundComponent, UnauthenticatedComponent, SubscriptionInsufficientComponent } from './shared/pages';\r\nimport { UnauthenticatedAccessGuard } from './shared/guards/unauthenticated-access/unauthenticated-access.guard';\r\nimport { ManagerOnlyGuard } from \"./shared/guards/unauthenticated-access/manager-only-guard\";\r\nimport { AcknowledgedDisclaimerGuard } from \"./shared/guards/acknowledged-disclaimer-guard\";\r\nimport { UserListComponent } from './pages/user-list/user-list.component';\r\nimport { HomeIndexComponent } from './pages/home/home-index/home-index.component';\r\nimport { UserDetailComponent } from './pages/user-detail/user-detail.component';\r\nimport { UserInviteComponent } from './pages/user-invite/user-invite.component';\r\nimport { UserEditComponent } from './pages/user-edit/user-edit.component';\r\nimport { LoginCallbackComponent } from './pages/login-callback/login-callback.component';\r\nimport { HelpComponent } from './pages/help/help.component';\r\nimport { CreateUserCallbackComponent } from './pages/create-user-callback/create-user-callback.component';\r\nimport { AboutComponent } from './pages/about/about.component';\r\nimport { DisclaimerComponent } from './pages/disclaimer/disclaimer.component';\r\nimport { WatershedListComponent } from './pages/watershed-list/watershed-list.component';\r\nimport { WatershedDetailComponent } from './pages/watershed-detail/watershed-detail.component';\r\nimport { FieldDefinitionListComponent } from './pages/field-definition-list/field-definition-list.component';\r\nimport { FieldDefinitionEditComponent } from './pages/field-definition-edit/field-definition-edit.component';\r\nimport { TrainingComponent } from './pages/training/training.component';\r\n\r\nconst routes: Routes = [\r\n  { path: \"labels-and-definitions/:id\", component: FieldDefinitionEditComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"labels-and-definitions\", component: FieldDefinitionListComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"watersheds\", component: WatershedListComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"watersheds/:id\", component: WatershedDetailComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"users\", component: UserListComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard]},\r\n  { path: \"users/:id\", component: UserDetailComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"users/:id/edit\", component: UserEditComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"invite-user/:userID\", component: UserInviteComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"invite-user\", component: UserInviteComponent, canActivate: [UnauthenticatedAccessGuard, ManagerOnlyGuard, AcknowledgedDisclaimerGuard] },\r\n  { path: \"\", component: HomeIndexComponent},\r\n  { path: \"disclaimer\", component: DisclaimerComponent },\r\n  { path: \"disclaimer/:forced\", component: DisclaimerComponent },\r\n  { path: \"help\", component: HelpComponent },\r\n  { path: \"training\", component: TrainingComponent},\r\n  { path: \"platform-overview\", component: AboutComponent},\r\n  { path: \"login-callback\", component: LoginCallbackComponent },\r\n  { path: \"create-user-callback\", component: CreateUserCallbackComponent },\r\n  { path: \"not-found\", component: NotFoundComponent },\r\n  { path: 'subscription-insufficient', component: SubscriptionInsufficientComponent },\r\n  { path: 'unauthenticated', component: UnauthenticatedComponent },\r\n  { path: '**', component: NotFoundComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component, Inject } from '@angular/core';\r\nimport { OAuthService, OAuthSuccessEvent } from 'angular-oauth2-oidc';\r\nimport { JwksValidationHandler } from 'angular-oauth2-oidc-jwks';\r\nimport { Subject, Observable } from 'rxjs';\r\nimport { environment } from '../environments/environment';\r\nimport { CookieStorageService } from './shared/services/cookies/cookie-storage.service';\r\nimport { Router, RouteConfigLoadStart, RouteConfigLoadEnd, NavigationEnd } from '@angular/router';\r\nimport { BusyService } from './shared/services';\r\nimport { AuthenticationService } from './services/authentication.service';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\ndeclare var require: any\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: './app.component.html',\r\n    styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n\r\n    userClaimsUpsertStarted = false;\r\n    ignoreSessionTerminated = false;\r\n    public currentYear: number = new Date().getFullYear();\r\n    \r\n    constructor(private router: Router, private oauthService: OAuthService, private cookieStorageService: CookieStorageService, private busyService: BusyService, private authenticationService: AuthenticationService, private titleService: Title, @Inject(DOCUMENT) private _document: HTMLDocument) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.router.events.subscribe((event: any) => {\r\n            if (event instanceof RouteConfigLoadStart) { // lazy loaded route started\r\n                this.busyService.setBusy(true);\r\n            } else if (event instanceof RouteConfigLoadEnd) { // lazy loaded route ended\r\n                this.busyService.setBusy(false);\r\n            } else if (event instanceof NavigationEnd) {\r\n                window.scrollTo(0, 0);\r\n            }\r\n        });\r\n        \r\n        this.configureAuthService().subscribe(() => {\r\n            this.oauthService.tryLogin();\r\n        });\r\n\r\n        this.titleService.setTitle(`${environment.leadOrganizationShortName} ${environment.platformShortName}`)\r\n        this.setAppFavicon();\r\n    }\r\n\r\n    private configureAuthService(): Observable<void> {\r\n        const subject = new Subject<void>();\r\n        this.oauthService.configure(environment.keystoneAuthConfiguration);\r\n        this.oauthService.setStorage(this.cookieStorageService);\r\n        this.oauthService.tokenValidationHandler = new JwksValidationHandler();\r\n        this.oauthService.loadDiscoveryDocument();\r\n        this.oauthService.events\r\n            .subscribe((e) => {\r\n                switch (e.type) {\r\n                    case 'discovery_document_loaded':\r\n                        console.log(\"discovery_document_loaded\");\r\n                        if ((e as OAuthSuccessEvent).info) {\r\n                            subject.next();\r\n                            subject.complete();\r\n                        }\r\n                        break;\r\n                    case 'token_received':\r\n                        console.log(\"token_received\");\r\n                        subject.next();\r\n                        subject.complete();\r\n                        break;\r\n                    case 'session_changed':\r\n                        console.log(\"session_changed\");\r\n                        // when the user logins from no-tenant URL and then jumps to the tenant URL,\r\n                        // the oAuthService triggers a session-changed followed by a session_terminated...\r\n                        // however the token still works as expected.\r\n                        // ATTENTION: Need to verify that on session expiration (and hence session_terminated) this session_changed doesn't get called...\r\n                        this.ignoreSessionTerminated = true;\r\n                        break;\r\n                    case 'session_terminated':\r\n                        if (!this.ignoreSessionTerminated) {\r\n                            console.warn('Your session has been terminated!');\r\n                            this.cookieStorageService.removeAll();\r\n                        }\r\n                        this.ignoreSessionTerminated = false;\r\n                        break;\r\n                }\r\n\r\n            });\r\n\r\n        return subject.asObservable();\r\n    }\r\n\r\n    setAppFavicon(){\r\n        this._document.getElementById('appFavicon').setAttribute('href', \"assets/main/favicons/\" + environment.faviconFilename);\r\n     }\r\n}\r\n","<header-nav></header-nav>\r\n<div class=\"mh-auto min-vh-100 page-content\">\r\n    <router-outlet></router-outlet>\r\n</div>\r\n<footer class=\"footer mt-2\">\r\n    <div class=\"container\">\r\n        <br>\r\n        <div class=\"row\">\r\n            <div class=\"col no-gutters text-center\">\r\n                <a href=\"https://sitkatech.com/\" alt=\"Sitka Technology Group\" target=\"_blank\">\r\n                    <img src=\"assets/main/logos/sitkatech-logo2x.width-600.png\" style=\"height: 55px;\">\r\n                </a>\r\n            </div>            \r\n        </div>\r\n        <div class=\"row mt-2\">\r\n            <div class=\"col text-center\">\r\n                © {{currentYear}} Sitka Technology Group, LLC. All Rights Reserved.\r\n            </div>\r\n        </div>\r\n    </div>\r\n</footer>","import { Injectable } from '@angular/core';;\r\nimport { from } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\ndeclare var window: any;\r\n\r\n@Injectable()\r\nexport class AppInitService {\r\n\r\n  // This is the method you want to call at bootstrap\r\n  // Important: It should return a Promise\r\n  public init() {\r\n    return from(\r\n        fetch('assets/config.json').then(function(response) {\r\n          return response.json();\r\n        })\r\n      ).pipe(\r\n        map((config) => {\r\n        config.keystoneAuthConfiguration.redirectUri = window.location.origin + config.keystoneAuthConfiguration.redirectUriRelative;\r\n        config.keystoneAuthConfiguration.postLogoutRedirectUri = window.location.origin + config.keystoneAuthConfiguration.postLogoutRedirectUri\r\n        window.config = config;\r\n        return;\r\n      })).toPromise();\r\n  }\r\n}","import { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { NgModule, APP_INITIALIZER, ErrorHandler } from '@angular/core';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { SharedModule } from './shared/shared.module';\r\nimport { OAuthModule } from 'angular-oauth2-oidc';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { AuthInterceptor } from './shared/interceptors/auth-interceptor';\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { HomeIndexComponent } from './pages/home/home-index/home-index.component';\r\nimport { UserListComponent } from './pages/user-list/user-list.component';\r\nimport { RouterModule } from '@angular/router';\r\nimport { UserInviteComponent } from './pages/user-invite/user-invite.component';\r\nimport { UserDetailComponent } from './pages/user-detail/user-detail.component';\r\nimport { UserEditComponent } from './pages/user-edit/user-edit.component';\r\nimport { WatershedDetailComponent } from './pages/watershed-detail/watershed-detail.component';\r\nimport { AgGridModule } from 'ag-grid-angular';\r\nimport { WatershedListComponent } from './pages/watershed-list/watershed-list.component';\r\nimport { DecimalPipe, CurrencyPipe, DatePipe } from '@angular/common';\r\nimport { LinkRendererComponent } from './shared/components/ag-grid/link-renderer/link-renderer.component';\r\n\r\n\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgxChartsModule } from '@swimlane/ngx-charts';\r\nimport { ComboSeriesVerticalComponent } from './shared/components/combo-chart/combo-series-vertical.component'\r\nimport { FontAwesomeIconLinkRendererComponent } from './shared/components/ag-grid/fontawesome-icon-link-renderer/fontawesome-icon-link-renderer.component';\r\nimport { LoginCallbackComponent } from './pages/login-callback/login-callback.component';\r\nimport { HelpComponent } from './pages/help/help.component';\r\nimport { SelectDropDownModule } from 'ngx-select-dropdown'\r\nimport { MyDatePickerModule } from 'mydatepicker';\r\nimport { MultiLinkRendererComponent } from './shared/components/ag-grid/multi-link-renderer/multi-link-renderer.component';\r\nimport { CreateUserCallbackComponent } from './pages/create-user-callback/create-user-callback.component';\r\nimport { AboutComponent } from './pages/about/about.component';\r\nimport { DisclaimerComponent } from './pages/disclaimer/disclaimer.component';\r\nimport { AppInitService } from './app.init';\r\nimport { FieldDefinitionListComponent } from './pages/field-definition-list/field-definition-list.component';\r\nimport { FieldDefinitionEditComponent } from './pages/field-definition-edit/field-definition-edit.component';\r\nimport { CKEditorModule } from '@ckeditor/ckeditor5-angular';\r\nimport { HttpErrorInterceptor } from './shared/interceptors/httpErrorInterceptor';\r\nimport { TrainingComponent } from './pages/training/training.component';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AppInsightsService } from './shared/services/app-insights.service';\r\nimport { GlobalErrorHandlerService } from './shared/services/global-error-handler.service';\r\n\r\nexport function init_app(appLoadService: AppInitService, appInsightsService:  AppInsightsService) {\r\n  return () => appLoadService.init().then(() => {\r\n    if (environment.appInsightsInstrumentationKey) {\r\n      appInsightsService.initAppInsights();\r\n    }\r\n  });\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HomeIndexComponent,\r\n    UserListComponent,\r\n    UserInviteComponent,\r\n    UserDetailComponent,\r\n    UserEditComponent,\r\n    WatershedDetailComponent,\r\n    WatershedListComponent,\r\n    ComboSeriesVerticalComponent,\r\n    LoginCallbackComponent,\r\n    HelpComponent,\r\n    CreateUserCallbackComponent,\r\n    AboutComponent,\r\n    DisclaimerComponent,\r\n    FieldDefinitionListComponent,\r\n    FieldDefinitionEditComponent,\r\n    TrainingComponent,\r\n  ],\r\n  imports: [\r\n    AppRoutingModule,\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    NgbModule,\r\n    RouterModule,\r\n    OAuthModule.forRoot(),\r\n    SharedModule.forRoot(),\r\n    FormsModule,\r\n    NgxChartsModule,\r\n    BrowserAnimationsModule,\r\n    AgGridModule.withComponents([]),\r\n    SelectDropDownModule,\r\n    MyDatePickerModule,\r\n    CKEditorModule\r\n  ],  \r\n  providers: [\r\n    CookieService,\r\n    AppInitService,\r\n    { provide: APP_INITIALIZER, useFactory: init_app, deps: [AppInitService, AppInsightsService], multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: HttpErrorInterceptor, multi: true },\r\n    {\r\n      provide: ErrorHandler,\r\n      useClass: GlobalErrorHandlerService\r\n    },\r\n    DecimalPipe, CurrencyPipe, DatePipe\r\n  ],\r\n  entryComponents: [LinkRendererComponent, FontAwesomeIconLinkRendererComponent, MultiLinkRendererComponent],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CustomRichTextType } from 'src/app/shared/models/enums/custom-rich-text-type.enum';\r\n\r\n@Component({\r\n  selector: 'fresca-about',\r\n  templateUrl: './about.component.html',\r\n  styleUrls: ['./about.component.scss']\r\n})\r\nexport class AboutComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  public richTextTypeID : number = CustomRichTextType.PlatformOverview;\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Platform Overview</li>\r\n    </ol>\r\n</nav>\r\n\r\n<!--RRB/EDF's names should not be configurated on this page-->\r\n<div class=\"container\">\r\n    <app-alert-display></app-alert-display>\r\n    <div class=\"row mb-2\">\r\n        <div class=\"col\">\r\n            <h2 class=\"d-inline-block\">Platform Overview</h2>\r\n            <custom-rich-text [customRichTextTypeID]=\"richTextTypeID\"></custom-rich-text>\r\n        </div>\r\n    </div>\r\n    <div class=\"row mb-2\">\r\n        <div class=\"col\">\r\n            <h2 class=\"d-inline-block\">Project Partners</h2>\r\n        </div>\r\n    </div>\r\n    <div class=\"row\">\r\n        <div class=\"col-3 text-center my-auto\">\r\n            <a href=\"https://sitkatech.com/\" alt=\"Sitka Technology Group\" target=\"_blank\">\r\n                <img src=\"assets/main/logos/sitkatech-logo2x.width-600.png\" style=\"height: 100px;\">\r\n            </a>\r\n        </div>\r\n        <div class=\"col-9 \">\r\n            <p><strong>Sitka Technology Group</strong></p>\r\n            <p><em>Description to go here</em></p>\r\n        </div>\r\n    </div>\r\n    <hr>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\n\r\n@Component({\r\n  selector: 'fresca-create-user-callback',\r\n  templateUrl: './create-user-callback.component.html',\r\n  styleUrls: ['./create-user-callback.component.scss']\r\n})\r\nexport class CreateUserCallbackComponent implements OnInit {\r\n\r\n  constructor(private authenticationService:AuthenticationService) { }\r\n\r\n  ngOnInit() {\r\n    this.authenticationService.login();\r\n  }\r\n\r\n}\r\n","<p>create-user-callback works!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service'\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { CustomRichTextType } from 'src/app/shared/models/enums/custom-rich-text-type.enum';\r\n\r\n@Component({\r\n  selector: 'fresca-disclaimer',\r\n  templateUrl: './disclaimer.component.html',\r\n  styleUrls: ['./disclaimer.component.scss']\r\n})\r\nexport class DisclaimerComponent implements OnInit {\r\n\r\n  private watchUserChangeSubscription : any;\r\n  private currentUser : UserDetailedDto;\r\n  private forced : boolean = true;\r\n  private return : string = '';\r\n  public richTextTypeID : number = CustomRichTextType.Disclaimer;\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private authenticationService : AuthenticationService,\r\n    private router : Router,\r\n    private route: ActivatedRoute\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.currentUser = currentUser;\r\n    });\r\n    this.route.queryParams.subscribe(params => this.return =  params['return'] || '/');\r\n    this.forced = this.route.snapshot.paramMap.get(\"forced\") === \"true\";\r\n  }\r\n\r\n  public checkDisclaimerAcknowledged(): boolean {\r\n      return !this.currentUser || (!this.forced && this.currentUser.DisclaimerAcknowledgedDate != null) ? false : true;\r\n  }\r\n\r\n  public setDisclaimerAcknowledged(): void {\r\n    this.userService.setDisclaimerAcknowledgedDate(this.currentUser.UserID).subscribe(x=>{\r\n      this.authenticationService.refreshUserInfo(x);\r\n      this.router.navigate([this.return]);\r\n    });\r\n  }\r\n\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Disclaimer</li>\r\n    </ol>\r\n</nav>\r\n<div class=\"container\">\r\n    <app-alert-display></app-alert-display>\r\n    <h2 class=\"d-inline-block\">Disclaimer</h2>\r\n    <div class=\"row\">\r\n        <div class=\"col\">\r\n            <custom-rich-text [customRichTextTypeID]=\"richTextTypeID\"></custom-rich-text>\r\n        </div>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\"checkDisclaimerAcknowledged()\">\r\n        <div class=\"col\">\r\n            <button class=\"btn btn-fresca btn-sm mr-3 float-right\"\r\n                (click)=\"setDisclaimerAcknowledged()\">Acknowledge</button>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { FieldDefinitionService } from 'src/app/shared/services/field-definition-service';\r\nimport * as ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { FieldDefinitionDto } from 'src/app/shared/models/generated/field-definition-dto';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Alert } from 'src/app/shared/models/alert';\r\nimport { AlertContext } from 'src/app/shared/models/enums/alert-context.enum';\r\nimport { AlertService } from 'src/app/shared/services/alert.service';\r\n\r\n@Component({\r\n  selector: 'fresca-field-definition-edit',\r\n  templateUrl: './field-definition-edit.component.html',\r\n  styleUrls: ['./field-definition-edit.component.scss']\r\n})\r\nexport class FieldDefinitionEditComponent implements OnInit {\r\n  private watchUserChangeSubscription: any;\r\n  private currentUser: UserDetailedDto;\r\n\r\n  public fieldDefinition: FieldDefinitionDto;\r\n  public Editor = ClassicEditor;\r\n  public editor;\r\n\r\n  public ckConfig = {\"removePlugins\": [\"MediaEmbed\", \"ImageUpload\"]};\r\n  isLoadingSubmit: boolean;\r\n\r\n  constructor(\r\n      private route: ActivatedRoute,\r\n      private router: Router,\r\n      private alertService: AlertService,\r\n      private fieldDefinitionService: FieldDefinitionService,\r\n      private authenticationService: AuthenticationService,\r\n      private cdr: ChangeDetectorRef\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n      this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n          this.currentUser = currentUser;\r\n          const id = parseInt(this.route.snapshot.paramMap.get(\"id\"));\r\n          if (id) {\r\n              this.fieldDefinitionService.getFieldDefinition(id).subscribe(fieldDefinition => {\r\n                this.fieldDefinition = fieldDefinition;\r\n              })\r\n          }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n      this.watchUserChangeSubscription.unsubscribe();\r\n      this.authenticationService.dispose();\r\n      this.cdr.detach();\r\n  }\r\n\r\n  public currentUserIsAdmin(): boolean {\r\n      return this.authenticationService.isUserAnAdministrator(this.currentUser);\r\n  }\r\n\r\n  // tell CkEditor to use the class below as its upload adapter\r\n  // see https://ckeditor.com/docs/ckeditor5/latest/framework/guides/deep-dive/upload-adapter.html#how-does-the-image-upload-work\r\n  public ckEditorReady(editor) {\r\n    this.editor = editor;\r\n  }\r\n\r\n  saveDefinition(): void {\r\n    this.isLoadingSubmit = true;\r\n\r\n    this.fieldDefinitionService.updateFieldDefinition(this.fieldDefinition)\r\n      .subscribe(response => {\r\n        this.isLoadingSubmit = false;\r\n        this.router.navigateByUrl(\"/labels-and-definitions\").then(x => {\r\n          this.alertService.pushAlert(new Alert(`The definition for ${this.fieldDefinition.FieldDefinitionType.FieldDefinitionTypeDisplayName} was successfully updated.`, AlertContext.Success));\r\n        });\r\n      }\r\n        ,\r\n        error => {\r\n          this.isLoadingSubmit = false;\r\n          this.cdr.detectChanges();\r\n        }\r\n      );\r\n  }\r\n\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\" aria-current=\"page\">\r\n            <a routerLink=\"/labels-and-definitions\" *ngIf=\"currentUserIsAdmin()\">Labels and Definitions</a>\r\n            <span *ngIf=\"!currentUserIsAdmin()\">Labels and Definitions</span>\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\" *ngIf=\"fieldDefinition\">\r\n            {{fieldDefinition.FieldDefinitionType.FieldDefinitionTypeDisplayName}}\r\n        </li>\r\n    </ol>\r\n</nav>\r\n<div class=\"container mt-sm-4\" *ngIf=\"fieldDefinition\">\r\n    <app-alert-display></app-alert-display>\r\n    <h2 class=\"d-inline-block\">\r\n        Edit Definition for Label: {{fieldDefinition.FieldDefinitionType.FieldDefinitionTypeDisplayName}} </h2>\r\n    <div class=\"row mt-4\">\r\n        <div class=\"col-12\">\r\n            <ckeditor [editor]=\"Editor\" [(ngModel)]=\"fieldDefinition.FieldDefinitionValue\" (ready)=\"ckEditorReady($event)\"\r\n                [config]=\"ckConfig\" ngDefaultControl></ckeditor>\r\n            <div style=\"float:right;\">\r\n                <button type=\"button\" class=\"btn btn-fresca mt-1 mr-1 mb-1\" (click)=\"saveDefinition()\" [disabled]=\"isLoadingSubmit\">Save</button>\r\n                <a routerLink=\"/labels-and-definitions\" class=\"btn btn-secondary mt-1 mb-1\">Cancel</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FieldDefinitionDto } from 'src/app/shared/models/generated/field-definition-dto';\r\nimport { FieldDefinitionService } from 'src/app/shared/services/field-definition-service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { LinkRendererComponent } from 'src/app/shared/components/ag-grid/link-renderer/link-renderer.component';\r\nimport { ColDef } from 'ag-grid-community';\r\nimport { CustomRichTextType } from 'src/app/shared/models/enums/custom-rich-text-type.enum';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { AgGridAngular } from 'ag-grid-angular';\r\n\r\n@Component({\r\n  selector: 'fresca-field-definition-list',\r\n  templateUrl: './field-definition-list.component.html',\r\n  styleUrls: ['./field-definition-list.component.scss']\r\n})\r\nexport class FieldDefinitionListComponent implements OnInit {\r\n\r\n  @ViewChild(\"fieldDefinitionsGrid\") fieldDefinitionsGrid: AgGridAngular;\r\n  private watchUserChangeSubscription: any;\r\n  private currentUser: UserDetailedDto;\r\n\r\n  public fieldDefinitions: Array<FieldDefinitionDto>\r\n  public richTextTypeID : number = CustomRichTextType.LabelsAndDefinitionsList;\r\n\r\n  public rowData = [];\r\n  public columnDefs: ColDef[];\r\n\r\n  constructor(\r\n    private fieldDefinitionService: FieldDefinitionService,\r\n    private authenticationService: AuthenticationService,\r\n    private cdr: ChangeDetectorRef) { }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.currentUser = currentUser;\r\n      this.fieldDefinitionsGrid.api.showLoadingOverlay();\r\n      this.fieldDefinitionService.listAllFieldDefinitions().subscribe(fieldDefinitions => {\r\n        this.fieldDefinitions = fieldDefinitions;\r\n        this.rowData = fieldDefinitions;\r\n        this.fieldDefinitionsGrid.api.hideOverlay();\r\n        this.cdr.detectChanges();\r\n      });\r\n      this.columnDefs = [\r\n        {\r\n          headerName: 'Label', valueGetter: function (params: any) {\r\n            return { LinkValue: params.data.FieldDefinitionType.FieldDefinitionTypeID, LinkDisplay: params.data.FieldDefinitionType.FieldDefinitionTypeDisplayName };\r\n          }, cellRendererFramework: LinkRendererComponent,\r\n          cellRendererParams: { inRouterLink: \"/labels-and-definitions/\" },\r\n          filterValueGetter: function (params: any) {\r\n            return params.data.FieldDefinitionType.FieldDefinitionDisplayName;\r\n          },\r\n          comparator: function (id1: any, id2: any) {\r\n            let link1 = id1.LinkDisplay;\r\n            let link2 = id2.LinkDisplay;\r\n            if (link1 < link2) {\r\n              return -1;\r\n            }\r\n            if (link1 > link2) {\r\n              return 1;\r\n            }\r\n            return 0;\r\n          },\r\n          sortable: true, filter: true, width:200\r\n        },\r\n        { headerName: 'Definition', field: 'FieldDefinitionValue',  \r\n          cellRenderer:function (params: any) { \r\n            return params.data.FieldDefinitionValue ? params.data.FieldDefinitionValue : ''\r\n          },\r\n           autoHeight:true, sortable: true, filter: true, width:900, cellStyle: {'white-space': 'normal'}},\r\n      ];\r\n\r\n      this.columnDefs.forEach(x => {\r\n        x.resizable = true;\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.watchUserChangeSubscription.unsubscribe();\r\n    this.authenticationService.dispose();\r\n    this.cdr.detach();\r\n  }\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Labels and Definitions</li>\r\n    </ol>\r\n</nav>\r\n<div class=\"container\">\r\n    <app-alert-display></app-alert-display>\r\n\r\n    <div class=\"row\">\r\n        <div class=\"col\">\r\n            <h2 class=\"d-inline-block\">Labels and Definitions</h2>\r\n        </div>\r\n    </div>\r\n    <div class=\"row mt-1 mb-2\">\r\n        <div class=\"col\">\r\n            <custom-rich-text [customRichTextTypeID]=\"richTextTypeID\"></custom-rich-text>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"container\">\r\n    <div class=\"table-responsive\">\r\n        <ag-grid-angular #fieldDefinitionsGrid style=\"width: 100%; height: 800px;\" class=\"ag-theme-balham\" [rowData]=\"rowData\"\r\n            [columnDefs]=\"columnDefs\" [pagination]=\"true\" [paginationPageSize]=\"100\">\r\n        </ag-grid-angular>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { CustomRichTextType } from 'src/app/shared/models/enums/custom-rich-text-type.enum';\r\n\r\n@Component({\r\n  selector: 'fresca-help',\r\n  templateUrl: './help.component.html',\r\n  styleUrls: ['./help.component.scss']\r\n})\r\nexport class HelpComponent implements OnInit {\r\n\r\n  public richTextTypeID : number = CustomRichTextType.Help;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Help</li>\r\n    </ol>\r\n</nav>\r\n<!--RRB/EDF's names should or should not be configurated on this page?-->\r\n<div class=\"container\">\r\n    <app-alert-display></app-alert-display>\r\n    <h2 class=\"d-inline-block\">Help</h2>\r\n    <custom-rich-text [customRichTextTypeID]=\"richTextTypeID\"></custom-rich-text>\r\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { error } from 'protractor';\r\nimport { RoleEnum } from 'src/app/shared/models/enums/role.enum';\r\nimport { environment } from 'src/environments/environment';\r\nimport { CustomRichTextType } from 'src/app/shared/models/enums/custom-rich-text-type.enum';\r\n\r\n@Component({\r\n    selector: 'app-home-index',\r\n    templateUrl: './home-index.component.html',\r\n    styleUrls: ['./home-index.component.scss']\r\n})\r\nexport class HomeIndexComponent implements OnInit, OnDestroy {\r\n    public watchUserChangeSubscription: any;\r\n    public currentUser: UserDetailedDto;\r\n\r\n    public richTextTypeID : number = CustomRichTextType.Homepage;\r\n\r\n    constructor(private authenticationService: AuthenticationService) {\r\n    }\r\n\r\n    public ngOnInit(): void {\r\n        if (localStorage.getItem(\"loginOnReturn\")){\r\n            localStorage.removeItem(\"loginOnReturn\");\r\n            this.authenticationService.login();\r\n        }\r\n        this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => { \r\n            this.currentUser = currentUser;\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n      this.watchUserChangeSubscription.unsubscribe();\r\n    }\r\n\r\n    public userIsUnassigned(){\r\n        if (!this.currentUser){\r\n            return false; // doesn't exist != unassigned\r\n        }\r\n        \r\n        return this.currentUser.Role.RoleID === RoleEnum.Unassigned;\r\n    }\r\n\r\n    public userRoleIsDisabled(){\r\n        if (!this.currentUser){\r\n            return false; // doesn't exist != unassigned\r\n        }\r\n        \r\n        return this.currentUser.Role.RoleID === RoleEnum.Disabled;\r\n    }\r\n\r\n    public isUserAnAdministrator(){\r\n        return this.authenticationService.isUserAnAdministrator(this.currentUser);\r\n    }\r\n\r\n    public login(): void {\r\n        this.authenticationService.login();\r\n    }\r\n\r\n    public createAccount(): void{\r\n        this.authenticationService.createAccount();\r\n    }\r\n\r\n    public forgotPasswordUrl() :string{\r\n        return `${environment.keystoneSupportBaseUrl}/ForgotPassword`;\r\n    }\r\n\r\n    public forgotUsernameUrl() :string{\r\n        return `${environment.keystoneSupportBaseUrl}/ForgotUsername`;\r\n    }\r\n\r\n    public keystoneSupportUrl():string{\r\n        return `${environment.keystoneSupportBaseUrl}/Support/20`;\r\n    }\r\n\r\n    public platformLongName():string{\r\n        return environment.platformLongName;\r\n    }\r\n\r\n    public platformShortName():string{\r\n        return environment.platformShortName;\r\n    }\r\n\r\n    public leadOrganizationShortName():string{\r\n        return environment.leadOrganizationShortName;\r\n    }\r\n\r\n    public leadOrganizationLongName(): string{\r\n        return environment.leadOrganizationLongName;\r\n    }\r\n\r\n    public leadOrganizationHomeUrl(): string{\r\n        return environment.leadOrganizationHomeUrl;\r\n    }\r\n}\r\n","<div class=\"container-fluid text-light my-0 py-0 d-none d-sm-block\">\r\n    <div class=\"row mt-0\">\r\n        <div class=\"col-sm homepageJumbotronImage\" id=\"homepageJumbotronImage1\"></div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"container mt-4\">\r\n\r\n    <ngb-alert *ngIf=\"userIsUnassigned()\" [type]=\"'info'\" [dismissible]=\"false\">\r\n        <span>\r\n            Welcome {{currentUser.FullName}}. You have successfully logged in to the {{platformLongName()}},\r\n            but your\r\n            account is not yet configured. You will receive an email from the {{leadOrganizationShortName()}}\r\n            Administrators when your account is\r\n            ready to\r\n            use. You may <a routerLink=\"/help\">Request Support</a> to contact the Administrators with any questions or\r\n            comments.\r\n        </span>\r\n    </ngb-alert>\r\n\r\n    <ngb-alert *ngIf=\"userRoleIsDisabled()\" [type]=\"'info'\" [dismissible]=\"false\">\r\n        <span>\r\n            Your account is currently disabled. Please <a routerLink=\"/help\">Request Support</a> if you would like to\r\n            activate your account.\r\n        </span>\r\n    </ngb-alert>\r\n\r\n    <app-alert-display></app-alert-display>\r\n    <h1 class=\"text-primary mb-4\">{{platformLongName()}}</h1>\r\n    <div class=\"row mt-sm-4\">\r\n        <div class=\"col-md-4 order-md-12 order-1 col-sm-12\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header\">\r\n                    <ng-container *ngIf=\"!currentUser\">Access</ng-container>\r\n                    <ng-container *ngIf=\"currentUser\">Quick actions</ng-container>\r\n                </div>\r\n                <div class=\"card-body\" *ngIf=\"!currentUser\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col\">\r\n                            Log in to view your Water Account. Create an Account if you don't have one yet.\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mt-2\">\r\n                        <div class=\"col mx-1\">\r\n                            <button (click)=\"login()\" class=\"btn btn-fresca mr-1\">Login</button>\r\n                            <button (click)=\"createAccount()\" class=\"btn btn-fresca ml-1\">Create\r\n                                Account</button>\r\n                        </div>\r\n                    </div>\r\n                    <hr />\r\n                    <div class=\"row\">\r\n                        <div class=\"col\">\r\n                            <small style=\"font-size:11px;\">\r\n                                Need help logging in? <br />\r\n                                <a href=\"{{forgotPasswordUrl()}}\">Forgot Password</a> | <a\r\n                                    href=\"{{forgotUsernameUrl()}}\">Forgot\r\n                                    Username</a> | <a href=\"{{keystoneSupportUrl()}}\">Request Support</a>\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"card-body\" *ngIf=\"currentUser\">\r\n                    <a class=\"btn btn-fresca\" routerLink=\"/help\">Request Support</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-md-8 order-md-1 order-12 col-sm-12\">\r\n            <div class=\"mt-2\">\r\n                <custom-rich-text [customRichTextTypeID]=\"richTextTypeID\"></custom-rich-text>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\n\r\n@Component({\r\n  selector: 'fresca-login-callback',\r\n  templateUrl: './login-callback.component.html',\r\n  styleUrls: ['./login-callback.component.scss']\r\n})\r\nexport class LoginCallbackComponent implements OnInit, OnDestroy {\r\n  private watchUserChangeSubscription: any;\r\n\r\n  constructor(private router: Router, private authenticationService: AuthenticationService) { }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.router.navigate(['/']);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.watchUserChangeSubscription.unsubscribe();\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CustomRichTextType } from 'src/app/shared/models/enums/custom-rich-text-type.enum';\r\n\r\n@Component({\r\n  selector: 'fresca-training',\r\n  templateUrl: './training.component.html',\r\n  styleUrls: ['./training.component.scss']\r\n})\r\nexport class TrainingComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  public richTextTypeID : number = CustomRichTextType.Training;\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Training</li>\r\n    </ol>\r\n</nav>\r\n\r\n<div class=\"container\">\r\n    <app-alert-display></app-alert-display>\r\n    <div class=\"row mb-2\">\r\n        <div class=\"col\">\r\n            <h2 class=\"d-inline-block\">Training</h2>\r\n            <custom-rich-text [customRichTextTypeID]=\"richTextTypeID\"></custom-rich-text>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { forkJoin } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'template-user-detail',\r\n    templateUrl: './user-detail.component.html',\r\n    styleUrls: ['./user-detail.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class UserDetailComponent implements OnInit, OnDestroy {\r\n    private watchUserChangeSubscription: any;\r\n    private currentUser: UserDetailedDto;\r\n\r\n    public user: UserDetailedDto;\r\n\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private router: Router,\r\n        private userService: UserService,\r\n        private authenticationService: AuthenticationService,\r\n        private cdr: ChangeDetectorRef\r\n    ) {\r\n        // force route reload whenever params change;\r\n        this.router.routeReuseStrategy.shouldReuseRoute = () => false;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n            this.currentUser = currentUser;\r\n            const id = parseInt(this.route.snapshot.paramMap.get(\"id\"));\r\n            if (id) {\r\n                forkJoin(\r\n                    this.userService.getUserFromUserID(id),\r\n                ).subscribe(([user]) => {\r\n                    this.user = user instanceof Array\r\n                        ? null\r\n                        : user as UserDetailedDto;\r\n                    this.cdr.detectChanges();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.watchUserChangeSubscription.unsubscribe();\r\n        this.authenticationService.dispose();\r\n        this.cdr.detach();\r\n    }\r\n\r\n    public currentUserIsAdmin(): boolean {\r\n        return this.authenticationService.isUserAnAdministrator(this.currentUser);\r\n    }\r\n\r\n    public userIsAdministrator(): boolean{\r\n        return this.authenticationService.isUserAnAdministrator(this.user);\r\n    }\r\n}\r\n","<nav aria-label=\"breadcrumb\" *ngIf=\"user\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\" aria-current=\"page\">\r\n            <a routerLink=\"/users\" *ngIf=\"currentUserIsAdmin()\">Users</a>\r\n            <span *ngIf=\"!currentUserIsAdmin()\">Users</span>\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n            {{user?.FullName ||  ((user?.FirstName || user?.LastName) ? (user?.FirstName + ' ' + user?.LastName) : null)}}\r\n        </li>\r\n    </ol>\r\n</nav>\r\n<div class=\"container mt-sm-4\" *ngIf=\"user\">\r\n    <div style=\"margin: 1rem 0 1rem 0;\" *ngIf=\"user.UserGuid === null\">\r\n        <a class=\"float-right btn btn-fresca btn-sm mr-3\" routerLink=\"/invite-user/{{user.UserID}}\">Invite User</a>\r\n    </div>  \r\n    <h2 class=\"d-inline-block\">\r\n        {{user?.FullName ||  ((user?.FirstName || user?.LastName) ? (user?.FirstName + ' ' + user?.LastName) : null)}}\r\n    </h2>\r\n    <app-alert-display></app-alert-display>\r\n    <div class=\"row mt-4\">\r\n        <div class=\"col-sm-6\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header\">\r\n                    <a *ngIf=\"currentUserIsAdmin()\" class=\"btn btn-fresca btn-sm float-right\"\r\n                        routerLink=\"/users/{{user?.UserID}}/edit\">\r\n                        <span class=\"fas fa-edit\"></span> Edit\r\n                    </a>\r\n                    Basics\r\n                </div>\r\n                <div class=\"card-body\">\r\n                    <dl class=\"row\">\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\">Username</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\">\r\n                            {{user?.LoginName}}\r\n                            <em *ngIf=\"!user?.LoginName\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\">First Name</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\">\r\n                            {{user?.FirstName}}\r\n                            <em *ngIf=\"!user?.FirstName\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\">Last Name</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\">\r\n                            {{user?.LastName}}\r\n                            <em *ngIf=\"!user?.LastName\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\">Full Name</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\">\r\n                            {{user?.FullName}}\r\n                            <em *ngIf=\"!user?.FullName\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\">Phone</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\">\r\n                            {{user?.Phone}}\r\n                            <em *ngIf=\"!user?.Phone\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\">Email</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\">\r\n                            {{user?.Email}}\r\n                            <em *ngIf=\"!user?.Email\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\">Role</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\">\r\n                            {{user?.Role?.RoleDisplayName}}\r\n                            <em *ngIf=\"!user?.Role?.RoleDisplayName\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n\r\n                        <dt class=\"text-sm-right col-sm-5 col-xs-12\" *ngIf=\"user.Role.RoleID === 1\">Receives System Communications</dt>\r\n                        <dd class=\"col-sm-7 col-xs-12\" *ngIf=\"user.Role.RoleID === 1\">\r\n                            {{user?.ReceiveSupportEmails == true ? \"Yes\" : \"No\"}}\r\n                            <em *ngIf=\"!user\" class=\"text-muted\">Not Available</em>\r\n                        </dd>\r\n                    </dl>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\nimport { FormArray, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { RoleService } from 'src/app/services/role/role.service';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { RoleDto } from 'src/app/shared/models/generated/role-dto';\r\nimport { forkJoin } from 'rxjs';\r\nimport { AlertService } from 'src/app/shared/services/alert.service';\r\nimport { Alert } from 'src/app/shared/models/alert';\r\nimport { AlertContext } from 'src/app/shared/models/enums/alert-context.enum';\r\nimport { UserUpdateDto } from 'src/app/shared/models/user/user-update-dto';\r\n\r\n\r\n@Component({\r\n  selector: 'fresca-user-edit',\r\n  templateUrl: './user-edit.component.html',\r\n  styleUrls: ['./user-edit.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class UserEditComponent implements OnInit, OnDestroy {\r\n  private watchUserChangeSubscription: any;\r\n  private currentUser: UserDetailedDto;\r\n\r\n  public userID: number;\r\n  public user: UserDetailedDto;\r\n  public model: UserUpdateDto;\r\n  public roles: Array<RoleDto>;\r\n  public isLoadingSubmit: boolean = false;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService,\r\n    private userService: UserService,\r\n    private roleService: RoleService,\r\n    private cdr: ChangeDetectorRef,\r\n    private alertService: AlertService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.currentUser = currentUser;\r\n\r\n      if (!this.authenticationService.isUserAnAdministrator(this.currentUser)) {\r\n        this.router.navigateByUrl(\"/not-found\")\r\n          .then();\r\n        return;\r\n      }\r\n\r\n      this.userID = parseInt(this.route.snapshot.paramMap.get(\"id\"));\r\n\r\n      forkJoin(\r\n        this.userService.getUserFromUserID(this.userID),\r\n        this.roleService.getRoles()\r\n      ).subscribe(([user, roles]) => {\r\n        this.user = user instanceof Array\r\n          ? null\r\n          : user as UserDetailedDto;\r\n\r\n        this.roles = roles.sort((a: RoleDto, b: RoleDto) => {\r\n          if (a.RoleDisplayName > b.RoleDisplayName)\r\n            return 1;\r\n          if (a.RoleDisplayName < b.RoleDisplayName)\r\n            return -1;\r\n          return 0;\r\n        });\r\n\r\n        this.model = new UserUpdateDto();\r\n        this.model.RoleID = user.Role.RoleID;\r\n        this.model.ReceiveSupportEmails = user.ReceiveSupportEmails;\r\n\r\n        this.cdr.detectChanges();\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.watchUserChangeSubscription.unsubscribe();\r\n    this.authenticationService.dispose();\r\n    this.cdr.detach();\r\n  }\r\n\r\n  onSubmit(editUserForm: HTMLFormElement): void {\r\n    this.isLoadingSubmit = true;\r\n\r\n    this.userService.updateUser(this.userID, this.model)\r\n      .subscribe(response => {\r\n        this.isLoadingSubmit = false;\r\n        this.router.navigateByUrl(\"/users/\" + this.userID).then(x => {\r\n          this.alertService.pushAlert(new Alert(\"The user was successfully updated.\", AlertContext.Success));\r\n        });\r\n      }\r\n        ,\r\n        error => {\r\n          this.isLoadingSubmit = false;\r\n          this.cdr.detectChanges();\r\n        }\r\n      );\r\n  }\r\n\r\n  checkReceiveSupportEmails(): void {\r\n    if (this.model.RoleID != 1){\r\n      this.model.ReceiveSupportEmails = false;\r\n    }\r\n  }\r\n}","<nav aria-label=\"breadcrumb\">\r\n  <ol class=\"breadcrumb\">\r\n    <li class=\"breadcrumb-item\">\r\n      <a routerLink=\"/users\">Users</a>\r\n    </li>\r\n    <li class=\"breadcrumb-item\">\r\n      <a routerLink=\"/users/{{user?.UserID}}\">\r\n        {{user?.FullName || (user?.FirstName + ' ' + user?.LastName)}}\r\n      </a>\r\n    </li>\r\n    <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n      Edit Basics\r\n    </li>\r\n  </ol>\r\n</nav>\r\n<div class=\"container mt-sm-4\" *ngIf=\"model\">\r\n    <h2 class=\"d-inline-block\">{{user?.FullName ||  ((user?.FirstName || user?.LastName) ? (user?.FirstName + ' ' + user?.LastName) : null)}}</h2>\r\n    <app-alert-display></app-alert-display>\r\n  <div class=\"col-sm-12\">\r\n    <form (ngSubmit)=\"onSubmit(editUserForm)\" #editUserForm=\"ngForm\">\r\n      <div class=\"form-group mt-4\">\r\n        <div class=\"col-sm-2 control-label\">\r\n          <label class=\"required\">Role</label>\r\n        </div>\r\n        <div class=\"col-sm-10\">\r\n          <select name=\"RoleID\" class=\"form-control\" [(ngModel)]=\"model.RoleID\" (change)=\"checkReceiveSupportEmails()\" required>\r\n            <option value=\"\"></option>\r\n            <option *ngFor=\"let role of roles\" [value]=\"role.RoleID\">\r\n              {{role.RoleDisplayName}}\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div class=\"form-group mt-4\" *ngIf=\"model.RoleID.toString() === '1'\">\r\n        <div class=\"col-sm-5 control-label\">\r\n          <label class=\"required\">Should Receive System Communications?</label>\r\n        </div>\r\n        <div class=\"col-sm-10\">\r\n          <label class=\"ml-2\"><input type=\"radio\" name=\"ReceiveSupportEmails\"\r\n            [(ngModel)]=\"model.ReceiveSupportEmails\" [value]=\"true\"> Yes</label>\r\n          <label class=\"ml-2\"><input type=\"radio\" name=\"ReceiveSupportEmails\"\r\n            [(ngModel)]=\"model.ReceiveSupportEmails\" [value]=\"false\"> No</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-sm\">\r\n          <i class=\"fas fa-bolt\"></i> Required field\r\n        </div>\r\n        <div class=\"col-sm text-right\">\r\n          <button type=\"submit\" class=\"btn btn-fresca\" [disabled]=\"!editUserForm.form.valid || isLoadingSubmit\">\r\n            <span *ngIf=\"isLoadingSubmit\" class=\"fa fa-spinner loading-spinner\"></span>\r\n            Submit\r\n          </button>\r\n          <a class=\"btn btn-secondary ml-1\" routerLink=\"/users/{{user?.UserID}}\">Cancel</a>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>","import { Component, OnInit, Output, Input, EventEmitter, ChangeDetectionStrategy, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\nimport { RoleService } from 'src/app/services/role/role.service';\r\nimport { AlertService } from 'src/app/shared/services/alert.service';\r\nimport { Alert } from 'src/app/shared/models/alert';\r\nimport { AlertContext } from 'src/app/shared/models/enums/alert-context.enum';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { RoleDto } from 'src/app/shared/models/generated/role-dto';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { forkJoin } from 'rxjs';\r\nimport { UserInviteDto } from 'src/app/shared/models/user/user-invite-dto';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n\r\n\r\n@Component({\r\n    selector: 'fresca-user-invite',\r\n    templateUrl: './user-invite.component.html',\r\n    styleUrls: ['./user-invite.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class UserInviteComponent implements OnInit, OnDestroy {\r\n    private watchUserChangeSubscription: any;\r\n    private currentUser: UserDetailedDto;\r\n\r\n    public roles: Array<RoleDto>;\r\n    public model: UserInviteDto;\r\n    public isLoadingSubmit: boolean = false;\r\n\r\n    constructor(private cdr: ChangeDetectorRef, \r\n        private route: ActivatedRoute,\r\n        private router: Router, private userService: UserService, private roleService: RoleService, private authenticationService: AuthenticationService, private alertService: AlertService) { }\r\n\r\n    ngOnInit(): void {\r\n        this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n            this.currentUser = currentUser;\r\n            this.roleService.getRoles().subscribe(result => {\r\n                this.roles = result;\r\n                this.cdr.detectChanges();\r\n            });\r\n\r\n            this.model = new UserInviteDto();\r\n\r\n            const userID = parseInt(this.route.snapshot.paramMap.get(\"userID\"));\r\n            if (userID) {\r\n                forkJoin(\r\n                    this.userService.getUserFromUserID(userID)\r\n                ).subscribe(([user]) => {\r\n                    if(user.UserGuid === null)\r\n                    {\r\n                        let userToInvite = user instanceof Array\r\n                            ? null\r\n                            : user as UserDetailedDto;\r\n                        this.model.Email = userToInvite.Email;\r\n                        this.model.FirstName = userToInvite.FirstName;\r\n                        this.model.LastName = userToInvite.LastName;\r\n                        this.model.RoleID = userToInvite.Role.RoleID;\r\n                        this.cdr.detectChanges();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.watchUserChangeSubscription.unsubscribe();\r\n        this.authenticationService.dispose();\r\n        this.cdr.detach();\r\n    }\r\n\r\n    canInviteUser(): boolean {\r\n        return this.model.FirstName && this.model.LastName && this.model.RoleID && this.model.Email && this.model.Email.indexOf(\"@\") != -1;\r\n    }\r\n\r\n    onSubmit(inviteUserForm: HTMLFormElement): void {\r\n        this.isLoadingSubmit = true;\r\n\r\n        this.userService.inviteUser(this.model)\r\n            .subscribe(response => {\r\n                this.isLoadingSubmit = false;\r\n                inviteUserForm.reset();\r\n                this.router.navigateByUrl(`/users/${response.UserID}`).then(x => {\r\n                    this.alertService.pushAlert(new Alert(\"The user invite was successful.\", AlertContext.Success));\r\n                });\r\n            }\r\n                ,\r\n                error => {\r\n                    this.isLoadingSubmit = false;\r\n                    this.cdr.detectChanges();\r\n                }\r\n            );\r\n    }\r\n\r\n    public currentUserIsAdmin(): boolean {\r\n        return this.authenticationService.isUserAnAdministrator(this.currentUser);\r\n    }\r\n\r\n    public platformShortName():string{\r\n        return environment.platformShortName;\r\n    }\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\" aria-current=\"page\">\r\n            <a routerLink=\"/users\" *ngIf=\"currentUserIsAdmin()\">Users</a>\r\n            <span *ngIf=\"!currentUserIsAdmin()\">Users</span>\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n            Invite User\r\n        </li>\r\n    </ol>\r\n</nav>\r\n<div class=\"container\">\r\n    <h2>Invite User</h2>\r\n    <p class=\"lead\">\r\n        This page lets you proactively invite users to the {{platformShortName()}}. After clicking Invite, the user will\r\n        be added\r\n        to the User list and you can assign appropriate roles to the user account.\r\n        \r\n        If the user does not already have an account they will receive an email with a link to verify their\r\n        account. Clicking this link will display a Keystone webpage where the user can set their password.</p>\r\n</div>\r\n<div class=\"container mt-sm-4\" *ngIf=\"model\">\r\n    <app-alert-display></app-alert-display>\r\n    <form (ngSubmit)=\"onSubmit(inviteUserForm)\" #inviteUserForm=\"ngForm\">\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-12\">\r\n                <div class=\"form-horizontal\">\r\n                    <div class=\"form-group\">\r\n                        <div class=\"col-sm-2 control-label\">\r\n                            <label class=\"required\">First Name</label>\r\n                        </div>\r\n                        <div class=\"col-sm-10\">\r\n                            <input type=\"text\" class=\"form-control\" name=\"FirstName\" placeholder=\"First Name\" required\r\n                                [(ngModel)]=\"model.FirstName\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <div class=\"col-sm-2 control-label\">\r\n                            <label class=\"required\">Last Name</label>\r\n                        </div>\r\n                        <div class=\"col-sm-10\">\r\n                            <input type=\"text\" class=\"form-control\" name=\"LastName\" placeholder=\"Last Name\" required\r\n                                [(ngModel)]=\"model.LastName\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <div class=\"col-sm-2 control-label\">\r\n                            <label class=\"required\">Email</label>\r\n                        </div>\r\n                        <div class=\"col-sm-10\">\r\n                            <input type=\"text\" class=\"form-control\" name=\"Email\" placeholder=\"Email\" required\r\n                                [(ngModel)]=\"model.Email\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <div class=\"col-sm-2 control-label\">\r\n\r\n                            <label class=\"required\">Role</label>\r\n                        </div>\r\n                        <div class=\"col-sm-10\">\r\n                            <select name=\"RoleID\" class=\"form-control\" [(ngModel)]=\"model.RoleID\" required>\r\n                                <option value=\"\"></option>\r\n                                <option *ngFor=\"let role of roles\" [value]=\"role.RoleID\">\r\n                                    {{role.RoleDisplayName}}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\">\r\n            <hr />\r\n            <div class=\"col-xs-12 col-sm-2\">\r\n                <i class=\"fas fa-bolt\"></i> Required field\r\n            </div>\r\n            <div class=\"col-xs-12 col-sm-10 text-right\">\r\n                <button type=\"submit\" class=\"btn btn-fresca\"\r\n                    [disabled]=\"isLoadingSubmit\">\r\n                    <span *ngIf=\"isLoadingSubmit\" class=\"fa fa-spinner loading-spinner\"></span>\r\n                    Invite\r\n                </button>\r\n                <a class=\"btn btn-secondary ml-1\" routerLink=\"/users\">Cancel</a>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>","import { Component, OnInit, ViewChildren, QueryList, ChangeDetectionStrategy, ChangeDetectorRef, OnDestroy, ViewChild, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { ColDef } from 'ag-grid-community';\r\nimport { LinkRendererComponent } from 'src/app/shared/components/ag-grid/link-renderer/link-renderer.component';\r\nimport { FontAwesomeIconLinkRendererComponent } from 'src/app/shared/components/ag-grid/fontawesome-icon-link-renderer/fontawesome-icon-link-renderer.component';\r\nimport { DecimalPipe } from '@angular/common';\r\nimport { AgGridAngular } from 'ag-grid-angular';\r\nimport { UtilityFunctionsService } from 'src/app/services/utility-functions.service';\r\nimport { UserCreateDto } from 'src/app/shared/models/user/user-create-dto';\r\nimport { RoleEnum } from 'src/app/shared/models/enums/role.enum';\r\n\r\ndeclare var $:any;\r\n\r\n@Component({\r\n  selector: 'fresca-user-list',\r\n  templateUrl: './user-list.component.html',\r\n  styleUrls: ['./user-list.component.scss']\r\n})\r\nexport class UserListComponent implements OnInit, OnDestroy {\r\n  @ViewChild('usersGrid') usersGrid: AgGridAngular;\r\n  @ViewChild('unassignedUsersGrid') unassignedUsersGrid: AgGridAngular;\r\n\r\n  private watchUserChangeSubscription: any;\r\n  private currentUser: UserDetailedDto;\r\n\r\n  public rowData = [];\r\n  columnDefs: ColDef[];\r\n  columnDefsUnassigned: ColDef[];\r\n  users: UserDetailedDto[];\r\n  unassignedUsers: UserDetailedDto[];\r\n\r\n  constructor(private cdr: ChangeDetectorRef, private authenticationService: AuthenticationService, private utilityFunctionsService: UtilityFunctionsService, private userService: UserService, private decimalPipe: DecimalPipe) { }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.currentUser = currentUser;\r\n      this.usersGrid.api.showLoadingOverlay();\r\n      this.userService.getUsers().subscribe(users => {\r\n        this.rowData = users;\r\n        this.usersGrid.api.hideOverlay();\r\n        this.users = users;\r\n        \r\n        this.unassignedUsers = users.filter(u =>{ return u.Role.RoleID === RoleEnum.Unassigned});\r\n\r\n        this.cdr.detectChanges();\r\n      });\r\n      let _decimalPipe = this.decimalPipe;\r\n\r\n        this.columnDefs = [\r\n          {\r\n            headerName: 'Name', valueGetter: function (params: any) {\r\n              return { LinkValue: params.data.UserID, LinkDisplay: params.data.FullName };\r\n            }, cellRendererFramework: LinkRendererComponent,\r\n            cellRendererParams: { inRouterLink: \"/users/\" },\r\n            filterValueGetter: function (params: any) {\r\n              return params.data.FullName;\r\n            },\r\n            comparator: function (id1: any, id2: any) {\r\n              let link1 = id1.LinkDisplay;\r\n              let link2 = id2.LinkDisplay;\r\n              if (link1 < link2) {\r\n                return -1;\r\n              }\r\n              if (link1 > link2) {\r\n                return 1;\r\n              }\r\n              return 0;\r\n            },\r\n            sortable: true, filter: true, width: 170\r\n          },\r\n          { headerName: 'Email', field: 'Email', sortable: true, filter: true },\r\n          { headerName: 'Role', field: 'Role.RoleDisplayName', sortable: true, filter: true, width: 100 },\r\n          { headerName: 'Receives System Communications?', field: 'ReceiveSupportEmails', valueGetter: function (params) { return params.data.ReceiveSupportEmails ? \"Yes\" : \"No\";}, sortable: true, filter: true, width: 250 },\r\n        ];\r\n        \r\n        this.columnDefs.forEach(x => {\r\n          x.resizable = true;\r\n        });\r\n    });\r\n  }\r\n\r\n  private refreshView(){\r\n    debugger;\r\n    this.unassignedUsersGrid.api.refreshView();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.watchUserChangeSubscription.unsubscribe();\r\n    this.authenticationService.dispose();\r\n    this.cdr.detach();\r\n  }\r\n\r\n  public exportToCsv() {\r\n    // we need to grab all columns except the first one (trash icon)\r\n    let columnsKeys = this.usersGrid.columnApi.getAllDisplayedColumns(); \r\n    let columnIds: Array<any> = []; \r\n    columnsKeys.forEach(keys => \r\n      { \r\n        let columnName: string = keys.getColId(); \r\n        columnIds.push(columnName); \r\n      });\r\n    columnIds.splice(0, 1);\r\n    this.utilityFunctionsService.exportGridToCsv(this.usersGrid, 'users.csv', columnIds);\r\n  }  \r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n  <ol class=\"breadcrumb\">\r\n      <li class=\"breadcrumb-item active\" aria-current=\"page\">Users</li>\r\n  </ol>\r\n</nav>\r\n<div class=\"container\">\r\n    <app-alert-display></app-alert-display>\r\n    <h2 class=\"d-inline-block\">Unassigned Users</h2>\r\n    <p class=\"lead\" *ngIf=\"users && unassignedUsers.length\">\r\n      This is a list of all users who are awaiting account configuration. Assign the user a role and billing account(s). If the account was created in error, set their Role to “Disabled” to remove them from this list.\r\n    </p>\r\n    <p class=\"lead\" *ngIf=\"users && !unassignedUsers.length\">\r\n      Congratulations! All users have been assigned a role.\r\n    </p>\r\n</div>\r\n<div class=\"container mt-sm-4\" *ngIf=\"users && unassignedUsers.length\">\r\n  <div class=\"table-responsive\">\r\n    <ag-grid-angular #unassignedUsersGrid style=\"width: 100%; height: 300px;\" class=\"ag-theme-balham\" [rowData]=\"unassignedUsers\"\r\n      [columnDefs]=\"columnDefs\" [pagination]=\"true\" [paginationPageSize]=\"100\">\r\n    </ag-grid-angular>\r\n  </div>\r\n</div>\r\n<div class=\"container\">\r\n    <div style=\"margin: 1rem 0 1rem 0;\" class=\"float-right\">\r\n        <a class=\"btn btn-fresca btn-sm mr-3\" routerLink=\"/invite-user\">Invite User</a>\r\n        <a class=\"btn btn-secondary btn-sm\" style=\"cursor: pointer;\" (click)=\"exportToCsv()\" placement=\"top\" ngbTooltip=\"Download list of Users\"><i\r\n          class=\"fas fa-download\"></i></a>\r\n    </div>\r\n    <h2 class=\"d-inline-block\">All Users</h2>\r\n    <p class=\"lead\">\r\n        A list of users is shown in the grid below.\r\n    </p>\r\n</div>\r\n<div class=\"container mt-sm-4\">\r\n  <div class=\"table-responsive\">\r\n    <ag-grid-angular #usersGrid style=\"width: 100%; height: 800px;\" class=\"ag-theme-balham\" [rowData]=\"rowData\"\r\n      [columnDefs]=\"columnDefs\" [pagination]=\"true\" [paginationPageSize]=\"100\">\r\n    </ag-grid-angular>\r\n  </div>\r\n</div>","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport { WatershedService } from 'src/app/services/watershed/watershed.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { forkJoin } from 'rxjs';\r\nimport { WatershedDto } from 'src/app/shared/models/generated/watershed-dto';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\n\r\n@Component({\r\n  selector: 'template-watershed-detail',\r\n  templateUrl: './watershed-detail.component.html',\r\n  styleUrls: ['./watershed-detail.component.scss']\r\n})\r\nexport class WatershedDetailComponent implements OnInit, OnDestroy {\r\n  private watchUserChangeSubscription: any;\r\n  private currentUser: UserDetailedDto;\r\n\r\n  public watershed: WatershedDto;\r\n\r\n  public today: Date = new Date();\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private watershedService: WatershedService,\r\n    private authenticationService: AuthenticationService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n    // force route reload whenever params change;\r\n    this.router.routeReuseStrategy.shouldReuseRoute = () => false;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.currentUser = currentUser;\r\n\r\n      const id = parseInt(this.route.snapshot.paramMap.get(\"id\"));\r\n      if (id) {\r\n        forkJoin(\r\n          this.watershedService.getWatershedByWatershedID(id),\r\n        ).subscribe(([watershed]) => {\r\n          this.watershed = watershed instanceof Array\r\n            ? null\r\n            : watershed as WatershedDto;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.watchUserChangeSubscription.unsubscribe();\r\n    this.authenticationService.dispose();\r\n    this.cdr.detach();\r\n  }\r\n\r\n  public getSelectedWatershedIDs(): Array<number> {\r\n    return this.watershed !== undefined ? [this.watershed.WatershedID] : [];\r\n  }\r\n}","<nav aria-label=\"breadcrumb\" *ngIf=\"watershed\">\r\n  <ol class=\"breadcrumb\">\r\n    <li class=\"breadcrumb-item\" aria-current=\"page\">\r\n      <a routerLink=\"/watersheds\">Watersheds</a>\r\n    </li>\r\n    <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n      {{watershed.WatershedName}}\r\n    </li>\r\n  </ol>\r\n</nav>\r\n<div class=\"container mt-sm-4\" *ngIf=\"watershed\">\r\n  <h2 class=\"d-inline-block\">\r\n    {{watershed.WatershedName}}\r\n  </h2>\r\n  <app-alert-display></app-alert-display>\r\n  <div class=\"row mt-4\">\r\n    <div class=\"col-sm-12 col-md-6\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          Basics\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <dl class=\"row\">\r\n            <dt class=\"text-sm-right col-sm-6 col-xs-12\"><field-definition [fieldDefinitionType]=\"'Name'\"></field-definition></dt>\r\n            <dd class=\"col-sm-6 col-xs-12\">\r\n              {{watershed.WatershedName}}\r\n            </dd>\r\n          </dl>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-sm-12 col-md-6\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          Location\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-12\" *ngIf=\"watershed\">\r\n              <watershed-map mapID=\"watershedsMapForWatershed\" \r\n              [selectedWatershedIDs]=\"getSelectedWatershedIDs()\" \r\n              [disableDefaultClick]=\"true\"\r\n              mapHeight=\"500px\">\r\n              </watershed-map>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, ChangeDetectorRef, OnDestroy, ViewChild } from '@angular/core';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { WatershedService } from 'src/app/services/watershed/watershed.service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { DecimalPipe } from '@angular/common';\r\nimport { ColDef, GridOptions } from 'ag-grid-community';\r\nimport { LinkRendererComponent } from 'src/app/shared/components/ag-grid/link-renderer/link-renderer.component';\r\nimport { forkJoin } from 'rxjs';\r\nimport { AgGridAngular } from 'ag-grid-angular';\r\nimport { UtilityFunctionsService } from 'src/app/services/utility-functions.service';\r\nimport { CustomRichTextType } from 'src/app/shared/models/enums/custom-rich-text-type.enum';\r\nimport { FieldDefinitionGridHeaderComponent } from 'src/app/shared/components/field-definition-grid-header/field-definition-grid-header.component';\r\n\r\n@Component({\r\n  selector: 'fresca-watershed-list',\r\n  templateUrl: './watershed-list.component.html',\r\n  styleUrls: ['./watershed-list.component.scss']\r\n})\r\nexport class WatershedListComponent implements OnInit, OnDestroy {\r\n  @ViewChild('watershedsGrid') watershedsGrid: AgGridAngular;\r\n\r\n  private watchUserChangeSubscription: any;\r\n  private currentUser: UserDetailedDto;\r\n\r\n  public richTextTypeID : number = CustomRichTextType.WatershedList;\r\n  public gridOptions: GridOptions;\r\n  public watersheds = [];\r\n  columnDefs: any;\r\n\r\n  constructor(private cdr: ChangeDetectorRef,\r\n    private authenticationService: AuthenticationService,\r\n    private utilityFunctionsService: UtilityFunctionsService,\r\n    private watershedService: WatershedService,\r\n    private decimalPipe: DecimalPipe) { }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.gridOptions = <GridOptions>{};\r\n      this.currentUser = currentUser;\r\n      this.watershedsGrid.api.showLoadingOverlay();\r\n      this.watershedService.getWatersheds().subscribe(watersheds => {\r\n        this.watersheds = watersheds;\r\n        this.watershedsGrid.api.hideOverlay();\r\n        this.cdr.detectChanges();\r\n      });\r\n\r\n      let _decimalPipe = this.decimalPipe;\r\n      this.columnDefs = [\r\n        { valueGetter: function (params: any) {\r\n          return { LinkDisplay: params.data.WatershedName, LinkValue: params.data.WatershedID };\r\n        }, cellRendererFramework: LinkRendererComponent,\r\n        cellRendererParams: { inRouterLink: \"/watersheds/\" },\r\n        filterValueGetter: function (params: any) {\r\n          return params.data.WatershedName;\r\n        },\r\n        comparator: function (id1: any, id2: any) {\r\n          if (id1.LinkDisplay < id2.LinkDisplay) {\r\n            return -1;\r\n          }\r\n          if (id1.LinkDisplay > id2.LinkDisplay) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }, headerComponentFramework: FieldDefinitionGridHeaderComponent, headerComponentParams: {fieldDefinitionType: 'Name'}, sortable: true, filter: true, width: 300 },\r\n      ];\r\n\r\n      this.columnDefs.forEach(x => {\r\n        x.resizable = true;\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.watchUserChangeSubscription.unsubscribe();\r\n    this.authenticationService.dispose();\r\n    this.cdr.detach();\r\n  }\r\n\r\n  public updateGridData() {\r\n    this.watershedService.getWatersheds().subscribe(result => {\r\n      this.watershedsGrid.api.setRowData(result);\r\n    });\r\n  }\r\n\r\n  public getSelectedWatershedIDs(): Array<number> {\r\n    return this.watersheds !== undefined ? this.watersheds.map(m => m.WatershedID) : [];\r\n  }\r\n\r\n  public exportToCsv() {\r\n    this.utilityFunctionsService.exportGridToCsv(this.watershedsGrid, 'watersheds.csv', null);\r\n  }\r\n}\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Watersheds</li>\r\n    </ol>\r\n</nav>\r\n<div class=\"container\">\r\n\r\n    <app-alert-display></app-alert-display>\r\n\r\n    <div class=\"row\">\r\n        <div class=\"col\">\r\n            <h2 class=\"d-inline-block\">Watersheds</h2>\r\n        </div>\r\n    </div>\r\n    <div class=\"row mt-1 mb-2\">\r\n        <div class=\"col\">\r\n            <custom-rich-text [customRichTextTypeID]=\"richTextTypeID\"></custom-rich-text>\r\n        </div>\r\n    </div>\r\n    <div class=\"row\">\r\n        <div class=\"col-auto mr-auto\">\r\n        </div>\r\n        <div class=\"col-auto\">\r\n            <div class=\"row\">\r\n                <div class=\"col-sm-2 pl-0 mt-1 mb-1\">\r\n                    <a class=\"btn btn-secondary btn-sm\" style=\"cursor: pointer;\" (click)=\"exportToCsv()\" placement=\"top\"\r\n                        ngbTooltip=\"Download list of Watersheds\"><i class=\"fas fa-download\"></i></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"container\">\r\n    <div class=\"table-responsive\">\r\n        <ag-grid-angular #watershedsGrid style=\"width: 100%; height: 400px;\" class=\"ag-theme-balham\" [rowData]=\"watersheds\"\r\n            [columnDefs]=\"columnDefs\" [pagination]=\"true\" [paginationPageSize]=\"100\">\r\n        </ag-grid-angular>\r\n    </div>\r\n    <div class=\"row mt-sm-4\" *ngIf=\"watersheds\">\r\n        <div class=\"col-sm-12\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body table-responsive\">\r\n                    <watershed-map mapID=\"watershedsMap\" \r\n                    [selectedWatershedIDs]=\"getSelectedWatershedIDs()\"\r\n                     mapHeight=\"500px\">\r\n                    </watershed-map>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { OAuthService } from 'angular-oauth2-oidc';\r\nimport { UserService } from './user/user.service';\r\nimport { UserDetailedDto } from '../shared/models';\r\nimport { Subject } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { CookieStorageService } from '../shared/services/cookies/cookie-storage.service';\r\nimport { Router, NavigationEnd, NavigationStart } from '@angular/router';\r\nimport { RoleEnum } from '../shared/models/enums/role.enum';\r\nimport { AlertService } from '../shared/services/alert.service';\r\nimport { Alert } from '../shared/models/alert';\r\nimport { AlertContext } from '../shared/models/enums/alert-context.enum';\r\nimport { UserCreateDto } from '../shared/models/user/user-create-dto';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthenticationService {\r\n  private currentUser: UserDetailedDto;\r\n\r\n  private getUserObservable: any;\r\n\r\n  private _currentUserSetSubject = new Subject<UserDetailedDto>();\r\n  public currentUserSetObservable = this._currentUserSetSubject.asObservable();\r\n\r\n\r\n  constructor(private router: Router,\r\n    private oauthService: OAuthService,\r\n    private cookieStorageService: CookieStorageService,\r\n    private userService: UserService,\r\n    private alertService: AlertService) {\r\n    this.router.events\r\n      .pipe(filter(e => e instanceof NavigationEnd))\r\n      .subscribe((e: NavigationEnd) => {\r\n        if (this.isAuthenticated()) {\r\n          var claims = this.oauthService.getIdentityClaims();\r\n          var globalID = claims[\"sub\"];\r\n\r\n          this.getUserObservable = this.userService.getUserFromGlobalID(globalID).subscribe(result => {\r\n            this.getUserCallback(result);\r\n          }, error => {\r\n            if (error.status !== 404) {\r\n              this.alertService.pushAlert(new Alert(\"There was an error logging into the application.\", AlertContext.Danger));\r\n              this.router.navigate(['/']);\r\n            } else {\r\n              this.alertService.clearAlerts();\r\n              const newUser = new UserCreateDto({\r\n                FirstName: claims[\"given_name\"],\r\n                LastName: claims[\"family_name\"],\r\n                Email: claims[\"email\"],\r\n                RoleID: RoleEnum.Unassigned,\r\n                LoginName: claims[\"login_name\"],\r\n                UserGuid: claims[\"sub\"],\r\n              });\r\n\r\n              this.userService.createNewUser(newUser).subscribe(user => {\r\n                this.getUserCallback(user);\r\n              })\r\n\r\n            }\r\n          });\r\n\r\n        } else {\r\n          this.currentUser = null;\r\n          this._currentUserSetSubject.next(null);\r\n        }\r\n      });\r\n\r\n    // check for a currentUser at NavigationStart so that authorization-based guards can work with promises.\r\n    this.router.events\r\n      .pipe(filter(e => e instanceof NavigationStart))\r\n      .subscribe((e: NavigationStart) => {\r\n        if (this.isAuthenticated() && !this.currentUser) {\r\n          var claims = this.oauthService.getIdentityClaims();\r\n          var globalID = claims[\"sub\"];\r\n          console.log(\"Authenticated but no user found...\")\r\n          this.getUserObservable = this.userService.getUserFromGlobalID(globalID).subscribe(user => {\r\n            this.currentUser = user;\r\n            this._currentUserSetSubject.next(this.currentUser);\r\n          });\r\n        }\r\n      })\r\n  }\r\n\r\n  private getUserCallback(user: UserDetailedDto) {\r\n    this.currentUser = user;\r\n    this._currentUserSetSubject.next(this.currentUser);\r\n  }\r\n\r\n  public refreshUserInfo(user: UserDetailedDto) {\r\n    this.getUserCallback(user);\r\n  }\r\n\r\n  dispose() {\r\n    this.getUserObservable.unsubscribe();\r\n  }\r\n\r\n  public isAuthenticated(): boolean {\r\n    return this.oauthService.hasValidAccessToken();\r\n  }\r\n\r\n  public handleUnauthorized(): void {\r\n    this.logout();\r\n  }\r\n\r\n  public login() {\r\n    this.oauthService.initImplicitFlow();\r\n  }\r\n\r\n  public createAccount() {\r\n    localStorage.setItem(\"loginOnReturn\", \"true\");\r\n    const redirectUrl = encodeURIComponent(environment.createAccountRedirectUrl);\r\n    window.location.href = `${environment.createAccountUrl}${redirectUrl}`;\r\n  }\r\n\r\n  public logout() {\r\n    this.oauthService.logOut();\r\n\r\n    setTimeout(() => {\r\n      this.cookieStorageService.removeAll();\r\n    });\r\n  }\r\n\r\n  public isUserAnAdministrator(user: UserDetailedDto): boolean {\r\n    const role = user && user.Role\r\n      ? user.Role.RoleID\r\n      : null;\r\n    return role === RoleEnum.Admin;\r\n  }\r\n\r\n  public isCurrentUserAnAdministrator(): boolean {\r\n    return this.isUserAnAdministrator(this.currentUser);\r\n  }\r\n\r\n  public isUserUnassigned(user: UserDetailedDto): boolean {\r\n    const role = user && user.Role\r\n      ? user.Role.RoleID\r\n      : null;\r\n    return role === RoleEnum.Unassigned;\r\n  }\r\n\r\n  public isUserRoleDisabled(user: UserDetailedDto): boolean {\r\n    const role = user && user.Role\r\n      ? user.Role.RoleID\r\n      : null;\r\n    return role === RoleEnum.Disabled;\r\n  }\r\n\r\n  public isCurrentUserNullOrUndefined(): boolean {\r\n    return !this.currentUser;\r\n  }\r\n\r\n  public hasCurrentUserAcknowledgedDisclaimer(): boolean {\r\n    return this.currentUser != null && this.currentUser.DisclaimerAcknowledgedDate != null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from 'src/app/shared/services';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class RoleService {\r\n\r\n    constructor(private apiService: ApiService) { }\r\n        \r\n    getRoles(): Observable<any[]> {\r\n        let route = `/roles`;\r\n        return this.apiService.getFromApi(route);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { UserDetailedDto } from 'src/app/shared/models';\r\nimport { ApiService } from 'src/app/shared/services';\r\nimport { Observable } from 'rxjs';\r\nimport { UserCreateDto } from 'src/app/shared/models/user/user-create-dto';\r\nimport { UnassignedUserReportDto } from 'src/app/shared/models/user/unassigned-user-report-dto';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class UserService {\r\n    constructor(private apiService: ApiService) { }\r\n\r\n    inviteUser(userInviteDto: any): Observable<UserDetailedDto> {\r\n        let route = `/users/invite`;\r\n        return this.apiService.postToApi(route, userInviteDto);\r\n    }\r\n\r\n    createNewUser(userCreateDto: UserCreateDto): Observable<UserDetailedDto> {\r\n        let route = `/users/`;\r\n        return this.apiService.postToApi(route, userCreateDto);\r\n    }\r\n\r\n    getUsers(): Observable<UserDetailedDto[]> {\r\n        let route = `/users`;\r\n        return this.apiService.getFromApi(route);\r\n    }\r\n\r\n    getUserFromUserID(userID: number): Observable<UserDetailedDto> {\r\n        let route = `/users/${userID}`;\r\n        return this.apiService.getFromApi(route);\r\n    }\r\n\r\n    getUserFromGlobalID(globalID: string): Observable<UserDetailedDto> {\r\n        let route = `/user-claims/${globalID}`;\r\n        return this.apiService.getFromApi(route);\r\n    }\r\n\r\n    updateUser(userID: number, userUpdateDto: any): Observable<UserDetailedDto> {\r\n        let route = `/users/${userID}`;\r\n        return this.apiService.putToApi(route, userUpdateDto);\r\n    }\r\n    \r\n    getUnassignedUserReport(): Observable<UnassignedUserReportDto> {\r\n        let route = `/users/unassigned-report`;\r\n        return this.apiService.getFromApi(route);\r\n    }\r\n\r\n    setDisclaimerAcknowledgedDate(userID: number): Observable<UserDetailedDto> {\r\n        let route = `/users/set-disclaimer-acknowledged-date`\r\n        return this.apiService.putToApi(route, userID);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AgGridAngular } from 'ag-grid-angular';\r\nimport { CsvExportParams } from 'ag-grid-community';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UtilityFunctionsService {\r\n\r\n  constructor() { }\r\n\r\n  public exportGridToCsv(grid: AgGridAngular, fileName: string, columnKeys: Array<string>) {\r\n    var params =\r\n      {\r\n        skipHeader: false,\r\n        columnGroups: false,\r\n        skipFooters: true,\r\n        skipGroups: true,\r\n        skipPinnedTop: true,\r\n        skipPinnedBottom: true,\r\n        allColumns: true,\r\n        onlySelected: false,\r\n        suppressQuotes: false,\r\n        fileName: fileName,\r\n        processCellCallback: function (p) {\r\n          if (p.column.getColDef().cellRendererFramework) {\r\n            if (p.value.DownloadDisplay) {\r\n              return p.value.DownloadDisplay;\r\n            } else {\r\n              return p.value.LinkDisplay;\r\n            }\r\n          }\r\n          else {\r\n            return p.value;\r\n          }\r\n        }\r\n      } as CsvExportParams\r\n    if (columnKeys) {\r\n      params.columnKeys = columnKeys;\r\n    }\r\n    grid.api.exportDataAsCsv(params);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from 'src/app/shared/services';\r\nimport { Observable } from 'rxjs';\r\nimport { WatershedDto } from 'src/app/shared/models/generated/watershed-dto';\r\nimport { BoundingBoxDto } from 'src/app/shared/models/bounding-box-dto';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WatershedService {\r\n  constructor(private apiService: ApiService) { }\r\n\r\n  getWatershedByWatershedID(watershedID: number): Observable<WatershedDto> {\r\n    let route = `/watersheds/${watershedID}`;\r\n    return this.apiService.getFromApi(route);\r\n  }\r\n\r\n  getBoundingBoxByWatershedIDs(watershedIDs: Array<number>): Observable<BoundingBoxDto> {\r\n    let route = `/watersheds/getBoundingBox`;\r\n    let watershedIDListDto = { watershedIDs: watershedIDs };\r\n    return this.apiService.postToApi(route, watershedIDListDto);\r\n  }\r\n\r\n  getWatersheds(): Observable<Array<WatershedDto>> {\r\n    let route = `/watersheds`;\r\n    return this.apiService.getFromApi(route);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AgRendererComponent } from 'ag-grid-angular';\r\n\r\n@Component({\r\n  selector: 'fresca-fontawesome-icon-link-renderer',\r\n  templateUrl: './fontawesome-icon-link-renderer.component.html',\r\n  styleUrls: ['./fontawesome-icon-link-renderer.component.scss']\r\n})\r\nexport class FontAwesomeIconLinkRendererComponent implements AgRendererComponent {\r\n  params: any;    \r\n\r\n  agInit(params: any): void {\r\n    if(params.value === null)\r\n    {\r\n      params = { value: \"\" }\r\n    }\r\n    else\r\n    {\r\n      this.params = params;\r\n    }\r\n  }\r\n\r\n  refresh(params: any): boolean {\r\n      return false;\r\n  }    \r\n}","<a [routerLink]=\"[params.inRouterLink, params.value]\" *ngIf=\"params\"><span class=\"fas fa-{{params.fontawesomeIconName}}\"></span></a>","import { Component, OnInit } from '@angular/core';\r\nimport { AgRendererComponent } from 'ag-grid-angular';\r\n\r\n@Component({\r\n  selector: 'fresca-link-renderer',\r\n  templateUrl: './link-renderer.component.html',\r\n  styleUrls: ['./link-renderer.component.scss']\r\n})\r\n\r\nexport class LinkRendererComponent implements AgRendererComponent {\r\n  params: any;    \r\n\r\n  agInit(params: any): void {\r\n    if(params.value === null)\r\n    {\r\n      params = { value: { LinkDisplay: \"\", LinkValue: \"\"}, inRouterLink: \"\"}\r\n    }\r\n    else\r\n    {\r\n      this.params = params;\r\n    }\r\n  }\r\n\r\n  refresh(params: any): boolean {\r\n      return false;\r\n  }    \r\n}","<a [routerLink]=\"[params.inRouterLink, params.value.LinkValue]\" *ngIf=\"params.value.LinkDisplay\" [className]=\"params.value.CssClasses\">{{params.value.LinkDisplay}}</a>","import { Component, OnInit } from '@angular/core';\r\nimport { AgRendererComponent } from 'ag-grid-angular';\r\n\r\n@Component({\r\n  selector: 'fresca-multi-link-renderer',\r\n  templateUrl: './multi-link-renderer.component.html',\r\n  styleUrls: ['./multi-link-renderer.component.scss']\r\n})\r\n\r\nexport class MultiLinkRendererComponent implements AgRendererComponent {\r\n  params: any;\r\n\r\n  agInit(params: any): void {\r\n    if (params.value === null) {\r\n      params = {\r\n        links: [{ value: { LinkDisplay: \"\", LinkValue: \"\" } }]\r\n        , inRouterLink: \"\"\r\n      }\r\n    }\r\n    else {\r\n      this.params = params;\r\n    }\r\n  }\r\n\r\n  refresh(params: any): boolean {\r\n    return false;\r\n  }\r\n}","<ng-container *ngFor=\"let link of params.value.links; last as isLast\">\r\n    <a [routerLink]=\"[params.inRouterLink, link.LinkValue]\" *ngIf=\"link.LinkDisplay && !isLast\"\r\n        [className]=\"link.CssClasses\">{{link.LinkDisplay}}, </a>\r\n        <a [routerLink]=\"[params.inRouterLink, link.LinkValue]\" *ngIf=\"link.LinkDisplay && isLast \"\r\n            [className]=\"link.CssClasses\">{{link.LinkDisplay}}</a>\r\n    </ng-container>","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {AlertService} from '../../services/alert.service';\r\nimport {Alert} from '../../models/alert';\r\nimport { BehaviorSubject, Subscribable, Subscription } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'app-alert-display',\r\n    templateUrl: './alert-display.component.html',\r\n    styleUrls: ['./alert-display.component.css']\r\n})\r\nexport class AlertDisplayComponent implements OnInit, OnDestroy {\r\n\r\n    public alerts: Alert[] = [];\r\n    private alertSubscription: Subscription;\r\n\r\n    constructor(\r\n        private alertService: AlertService,\r\n    ) {\r\n    }\r\n\r\n    public ngOnInit(): void {\r\n        this.alertSubscription = this.alertService.alertSubject.asObservable().subscribe(alerts=>{\r\n            this.alerts = alerts;\r\n        })\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this.alerts = null;\r\n        this.alertSubscription.unsubscribe();\r\n        this.alertService.clearAlerts();\r\n    }\r\n\r\n    public closeAlert(alert: Alert) {\r\n        this.alertService.removeAlert(alert);\r\n    }\r\n\r\n}\r\n","<div class=\"mt-2\" *ngIf=\"alerts.length > 0\">\r\n    <ngb-alert *ngFor=\"let alert of alerts\" [type]=\"alert.context\" [dismissible]=\"alert.dismissable\"\r\n               (close)=\"closeAlert(alert)\">\r\n       <span [innerHTML]=\"alert.message\"></span>\r\n    </ngb-alert>\r\n</div>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnChanges,\r\n  ChangeDetectionStrategy\r\n } from '@angular/core';\r\nimport {\r\n  trigger,\r\n  state,\r\n  style,\r\n  animate,\r\n  transition\r\n} from '@angular/animations';\r\nimport { formatLabel } from '@swimlane/ngx-charts';\r\n\r\n@Component({\r\n  selector: 'g[ngx-combo-charts-series-vertical]',\r\n  template: `\r\n    <svg:g ngx-charts-bar *ngFor=\"let bar of bars; trackBy: trackBy\"\r\n      [@animationState]=\"'active'\"\r\n      [width]=\"bar.width\"\r\n      [height]=\"bar.height\"\r\n      [x]=\"bar.x\"\r\n      [y]=\"bar.y\"\r\n      [fill]=\"bar.color\"\r\n      [stops]=\"bar.gradientStops\"\r\n      [data]=\"bar.data\"\r\n      [orientation]=\"'vertical'\"\r\n      [roundEdges]=\"bar.roundEdges\"\r\n      [gradient]=\"gradient\"\r\n      [isActive]=\"isActive(bar.data)\"\r\n      [animations]=\"animations\"\r\n      [noBarWhenZero]=\"noBarWhenZero\"\r\n      (select)=\"onClick($event)\"\r\n      (activate)=\"activate.emit($event)\"\r\n      (deactivate)=\"deactivate.emit($event)\"\r\n      ngx-tooltip\r\n      [tooltipDisabled]=\"tooltipDisabled\"\r\n      [tooltipPlacement]=\"'top'\"\r\n      [tooltipType]=\"'tooltip'\"\r\n      [tooltipTitle]=\"bar.tooltipText\">\r\n    </svg:g>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [\r\n    trigger('animationState', [\r\n      transition('* => void', [\r\n        style({\r\n          opacity: 1,\r\n          transform: '*',\r\n        }),\r\n        animate(500, style({opacity: 0, transform: 'scale(0)'}))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class ComboSeriesVerticalComponent implements OnChanges {\r\n\r\n  @Input() dims;\r\n  @Input() type = 'standard';\r\n  @Input() series;\r\n  @Input() seriesLine;\r\n  @Input() xScale;\r\n  @Input() yScale;\r\n  @Input() colors;\r\n  @Input() tooltipDisabled: boolean = false;\r\n  @Input() gradient: boolean;\r\n  @Input() activeEntries: any[];\r\n  @Input() seriesName: string;\r\n  @Input() animations: boolean = true;\r\n  @Input() noBarWhenZero: boolean = true;\r\n  \r\n  @Output() select = new EventEmitter();\r\n  @Output() activate = new EventEmitter();\r\n  @Output() deactivate = new EventEmitter();\r\n  @Output() bandwidth = new EventEmitter();\r\n\r\n  bars: any;\r\n  x: any;\r\n  y: any;\r\n\r\n  ngOnChanges(changes): void {\r\n    this.update();\r\n  }\r\n\r\n  update(): void {\r\n    let width;\r\n    if (this.series.length) {\r\n      width = this.xScale.bandwidth();\r\n      this.bandwidth.emit(width);\r\n    }\r\n\r\n    let d0 = 0;\r\n    let total;\r\n    if (this.type === 'normalized') {\r\n      total = this.series.map(d => d.value).reduce((sum, d) => sum + d, 0);\r\n    }\r\n\r\n    this.bars = this.series.map((d, index) => {\r\n\r\n      let value = d.value;\r\n      const label = d.name;\r\n      const formattedLabel = formatLabel(label);\r\n      const roundEdges = this.type === 'standard';\r\n\r\n      const bar: any = {\r\n        value,\r\n        label,\r\n        roundEdges,\r\n        data: d,\r\n        width,\r\n        formattedLabel,\r\n        height: 0,\r\n        x: 0,\r\n        y: 0\r\n      };\r\n\r\n      if (this.type === 'standard') {\r\n        bar.height = Math.abs(this.yScale(value) - this.yScale(0));\r\n        bar.x = this.xScale(label);\r\n\r\n        if (value < 0) {\r\n          bar.y = this.yScale(0);\r\n        } else {\r\n          bar.y = this.yScale(value);\r\n        }\r\n      } else if (this.type === 'stacked') {\r\n        const offset0 = d0;\r\n        const offset1 = offset0 + value;\r\n        d0 += value;\r\n\r\n        bar.height = this.yScale(offset0) - this.yScale(offset1);\r\n        bar.x = 0;\r\n        bar.y = this.yScale(offset1);\r\n        bar.offset0 = offset0;\r\n        bar.offset1 = offset1;\r\n      } else if (this.type === 'normalized') {\r\n        let offset0 = d0;\r\n        let offset1 = offset0 + value;\r\n        d0 += value;\r\n\r\n        if (total > 0) {\r\n          offset0 = (offset0 * 100) / total;\r\n          offset1 = (offset1 * 100) / total;\r\n        } else {\r\n          offset0 = 0;\r\n          offset1 = 0;\r\n        }\r\n\r\n        bar.height = this.yScale(offset0) - this.yScale(offset1);\r\n        bar.x = 0;\r\n        bar.y = this.yScale(offset1);\r\n        bar.offset0 = offset0;\r\n        bar.offset1 = offset1;\r\n        value = (offset1 - offset0).toFixed(2) + '%';\r\n      }\r\n\r\n      if (this.colors.scaleType === 'ordinal') {\r\n        bar.color = this.colors.getColor(label);\r\n      } else {\r\n        if (this.type === 'standard') {\r\n          bar.color = this.colors.getColor(value);\r\n          bar.gradientStops = this.colors.getLinearGradientStops(value);\r\n        } else {\r\n          bar.color = this.colors.getColor(bar.offset1);\r\n          bar.gradientStops = this.colors.getLinearGradientStops(bar.offset1, bar.offset0);\r\n        }\r\n      }\r\n\r\n      let tooltipLabel = formattedLabel;\r\n      if (this.seriesName) {\r\n        tooltipLabel = `${this.seriesName} • ${formattedLabel}`;\r\n      }\r\n      \r\n      this.getSeriesTooltips(this.seriesLine, index);\r\n      const lineValue = this.seriesLine[0].series[index].value;\r\n      const lineName = this.seriesLine[0].series[index].name;\r\n      bar.tooltipText = `\r\n        <span class=\"tooltip-label\">${tooltipLabel }</span>\r\n        <span class=\"tooltip-val\"> Y1 - ${value.toLocaleString()} • Y2 - ${lineValue.toLocaleString()}%</span>\r\n      `;\r\n\r\n      return bar;\r\n    });\r\n  }\r\n  getSeriesTooltips(seriesLine, index) {\r\n    return seriesLine.map(d => {\r\n      return d.series[index];\r\n    });\r\n  }\r\n  isActive(entry): boolean {\r\n    if(!this.activeEntries) return false;\r\n    const item = this.activeEntries.find(d => {\r\n      return entry.name === d.name && entry.series === d.series;\r\n    });\r\n    return item !== undefined;\r\n  }\r\n\r\n  onClick(data): void {\r\n    this.select.emit(data);\r\n  }\r\n\r\n  trackBy(index, bar): string {\r\n    return bar.label;\r\n  }\r\n\r\n}","import { Component, OnInit, Input, OnChanges, SimpleChanges, ChangeDetectorRef } from '@angular/core';\r\nimport { CustomRichTextService } from '../../services/custom-rich-text.service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { UserDetailedDto } from '../../models/user/user-detailed-dto';\r\nimport { CustomRichTextDetailedDto } from '../../models/custom-rich-text-detailed-dto';\r\nimport { AlertService } from '../../services/alert.service';\r\nimport { Alert } from '../../models/alert';\r\nimport { AlertContext } from '../../models/enums/alert-context.enum';\r\nimport * as ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport { environment } from 'src/environments/environment';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\n\r\n@Component({\r\n  selector: 'custom-rich-text',\r\n  templateUrl: './custom-rich-text.component.html',\r\n  styleUrls: ['./custom-rich-text.component.scss']\r\n})\r\nexport class CustomRichTextComponent implements OnInit {\r\n  @Input() customRichTextTypeID: number;\r\n  public customRichTextContent: SafeHtml;\r\n  public isLoading: boolean = true;\r\n  public isEditing: boolean = false;\r\n  public isEmptyContent: boolean = false;\r\n  public watchUserChangeSubscription: any;\r\n  public Editor = ClassicEditor;\r\n  public editedContent: string;\r\n  public editor;\r\n\r\n  currentUser: UserDetailedDto;\r\n\r\n  //For media embed https://ckeditor.com/docs/ckeditor5/latest/api/module_media-embed_mediaembed-MediaEmbedConfig.html\r\n  //Only some embeds will work, and if we want others to work we'll likely need to write some extra functions\r\n  public ckConfig = {mediaEmbed: {previewsInData: true}};\r\n\r\n  constructor(private customRichTextService: CustomRichTextService,\r\n    private authenticationService: AuthenticationService,\r\n    private cdr: ChangeDetectorRef,\r\n    private alertService: AlertService,\r\n    private sanitizer: DomSanitizer) { }\r\n\r\n  ngOnInit() {\r\n    this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n      this.currentUser = currentUser;\r\n    });\r\n    //window.Editor = this.Editor;\r\n\r\n    this.customRichTextService.getCustomRichText(this.customRichTextTypeID).subscribe(x => {\r\n      this.customRichTextContent = this.sanitizer.bypassSecurityTrustHtml(x.CustomRichTextContent);\r\n      this.isEmptyContent = x.IsEmptyContent;\r\n      this.editedContent = x.CustomRichTextContent;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  // tell CkEditor to use the class below as its upload adapter\r\n  // see https://ckeditor.com/docs/ckeditor5/latest/framework/guides/deep-dive/upload-adapter.html#how-does-the-image-upload-work\r\n  public ckEditorReady(editor) {\r\n    const customRichTextService = this.customRichTextService\r\n    this.editor = editor;\r\n\r\n    editor.plugins.get('FileRepository').createUploadAdapter = (loader) => {\r\n      // disable the editor until the image comes back\r\n      editor.isReadOnly = true;\r\n      return new CkEditorUploadAdapter(loader, customRichTextService, environment.apiHostName, editor);\r\n    };\r\n  }\r\n\r\n  public showEditButton(): boolean {\r\n    return this.authenticationService.isUserAnAdministrator(this.currentUser);\r\n  }\r\n\r\n  public enterEdit(): void {\r\n    this.isEditing = true;\r\n  }\r\n\r\n  public cancelEdit(): void {\r\n    this.isEditing = false;\r\n  }\r\n\r\n  public saveEdit(): void {\r\n    this.isEditing = false;\r\n    this.isLoading = true;\r\n    const updateDto = new CustomRichTextDetailedDto({ CustomRichTextContent: this.editedContent });\r\n    console.log(updateDto);\r\n    this.customRichTextService.updateCustomRichText(this.customRichTextTypeID, updateDto).subscribe(x => {\r\n      this.customRichTextContent = this.sanitizer.bypassSecurityTrustHtml(x.CustomRichTextContent);\r\n      this.editedContent = x.CustomRichTextContent;\r\n      this.isLoading = false;\r\n    }, error => {\r\n      this.isLoading = false;\r\n      this.alertService.pushAlert(new Alert(\"There was an error updating the rich text content\", AlertContext.Danger, true));\r\n    });\r\n  }\r\n  \r\n  public isUploadingImage():boolean{\r\n    return this.editor && this.editor.isReadOnly;\r\n  }\r\n\r\n}\r\n\r\nclass CkEditorUploadAdapter {\r\n  loader;\r\n  service: CustomRichTextService;\r\n  apiUrl: string;\r\n  editor;\r\n\r\n  constructor(loader, uploadService: CustomRichTextService, apiUrl: string, editor) {\r\n    // The file loader instance to use during the upload.\r\n    this.loader = loader;\r\n    this.service = uploadService;\r\n    this.apiUrl = apiUrl;\r\n    this.editor = editor;\r\n  }\r\n\r\n  // Starts the upload process.\r\n  upload() {\r\n    const editor = this.editor;\r\n    const service = this.service;\r\n\r\n\r\n    return this.loader.file.then(file => new Promise((resolve, reject) => {\r\n      service.uploadFile(file).subscribe(x => {\r\n        const imageUrl = `https://${this.apiUrl}${x.imageUrl}`;\r\n        editor.isReadOnly = false;\r\n\r\n        resolve({\r\n          // todo: this should be correct instead of incorrect.\r\n          default: imageUrl\r\n        });\r\n      }, error => {\r\n        editor.isReadOnly = false;\r\n\r\n        reject(\"There was an error uploading the file. Please try again.\")\r\n      });\r\n    })\r\n    );\r\n  }\r\n\r\n  // Aborts the upload process.\r\n  abort() {\r\n    // NP 4/23/2020 todo? I'm not sure this is actually necessary, I don't see any way for the user to cancel the upload once triggered.\r\n  }\r\n}\r\n","<div *ngIf=\"isLoading\" class=\"text-center\">\r\n    <span class=\"fa fa-spinner loading-spinner\"></span>\r\n</div>\r\n\r\n<div *ngIf=\"!isLoading\">\r\n    <ng-container *ngIf=\"!isEditing\">\r\n        <div *ngIf=\"showEditButton()\" class=\"customRichTextContent\" style=\"position: relative; min-height: 30px;\">\r\n            <div class=\"hoverEditButton\">\r\n                <div style=\"margin-top: 10px\">\r\n                    <button type=\"button\" class=\"btn btn-fresca\" (click)=\"enterEdit()\">\r\n                        Edit\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"!emptyContent\" [innerHtml]=\"customRichTextContent\"></div>\r\n\r\n            <div *ngIf=\"emptyContent\" class=\"hoverEmptySpace\"></div>\r\n        </div>\r\n        <div *ngIf=\"!showEditButton()\" [innerHtml]=\"customRichTextContent\"></div>\r\n    </ng-container>\r\n    <div *ngIf=\"isEditing\" [ngClass]=\"{'ckEditorDisabled':isUploadingImage()}\">\r\n        <div *ngIf=\"isUploadingImage()\">\r\n            <em>Please wait while the image is uploaded...</em>\r\n            <span class=\"mt-1 fa fa-spinner loading-spinner\" style=\"float:right;\"></span>\r\n        </div>\r\n        <ckeditor [editor]=\"Editor\" [(ngModel)]=\"editedContent\" (ready)=\"ckEditorReady($event)\" [config]=\"ckConfig\"></ckeditor>\r\n        <div style=\"float:right;\" *ngIf=\"!isUploadingImage()\">\r\n            <button type=\"button\" class=\"btn btn-fresca mt-1 mr-1\" (click)=\"saveEdit()\">Save</button>\r\n            <button type=\"button\" class=\"btn btn-secondary mt-1\" (click)=\"cancelEdit()\">Cancel</button>\r\n        </div>\r\n        <div *ngIf=\"isUploadingImage()\">\r\n            <em>Please wait while the image is uploaded...</em>\r\n            <span class=\"mt-1 fa fa-spinner loading-spinner\" style=\"float:right;\"></span>\r\n        </div>\r\n    </div>\r\n</div>","import {Component, ElementRef, OnDestroy, ViewChild} from \"@angular/core\";\r\nimport {IHeaderParams} from \"ag-grid-community\";\r\nimport {IHeaderAngularComp} from \"ag-grid-angular\";\r\n\r\ninterface MyParams extends IHeaderParams {\r\n    menuIcon: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'fresca-field-definition-grid-header',\r\n  templateUrl: './field-definition-grid-header.component.html',\r\n  styleUrls: ['./field-definition-grid-header.component.scss']\r\n})\r\nexport class FieldDefinitionGridHeaderComponent implements OnDestroy, IHeaderAngularComp  {\r\n  @ViewChild ('header') header: ElementRef;\r\n    public params: any;\r\n    public sorted: string;\r\n    private elementRef: ElementRef;\r\n    public showMenu: boolean = false;\r\n\r\n    constructor(elementRef: ElementRef) {\r\n        this.elementRef = elementRef;\r\n    }\r\n\r\n    agInit(params: MyParams): void {\r\n        this.params = params;\r\n        //because of the way the popover sits and how it's triggered, it's best to just prevent the column from covering it\r\n        //TODO make the css here more act more like the default ag-grid css\r\n        this.params.column.minWidth = this.params.column.actualWidth;\r\n        this.params.column.addEventListener('sortChanged', this.onSortChanged.bind(this));\r\n        this.onSortChanged();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n    }\r\n\r\n    onMenuClick(event:Event) {\r\n        event.stopPropagation();\r\n        this.params.showColumnMenu(this.querySelector('.customHeaderMenuButton'));\r\n    }\r\n\r\n    onSortRequested(event) {\r\n      this.params.progressSort(event.shiftKey);\r\n    };\r\n\r\n    onSortChanged() {\r\n        if (this.params.column.isSortAscending()) {\r\n            this.sorted = 'asc'\r\n        } else if (this.params.column.isSortDescending()) {\r\n            this.sorted = 'desc'\r\n        } else {\r\n            this.sorted = ''\r\n        }\r\n    };\r\n\r\n\r\n    private querySelector(selector: string) {\r\n        return <HTMLElement>this.elementRef.nativeElement.querySelector(\r\n            '.customHeaderMenuButton', selector);\r\n    }\r\n}","<div style=\"display: flex; align-items: center; width:100%\" (click)=\"onSortRequested($event)\" (mouseenter)=\"showMenu = true\" (mouseleave)=\"showMenu = false\">\r\n    <div #header class=\"customHeaderLabel\"><field-definition  [fieldDefinitionType]=\"params.fieldDefinitionType\" [labelOverride]=\"params.labelOverride\"></field-definition></div>\r\n    <div [hidden]=\"!params.enableSorting\" style=\"margin-left:5px; margin-right:5px\">\r\n        <i *ngIf=\"this.sorted === 'desc'\" class=\"fa fa-long-arrow-down\"></i>\r\n        <i *ngIf=\"this.sorted === 'asc'\" class=\"fa fa-long-arrow-up\"></i>\r\n    </div>\r\n    <div *ngIf=\"showMenu\" class=\"customHeaderMenuButton ml-auto\" (click)=\"onMenuClick($event)\">\r\n        <i class=\"fa fa-bars\"></i>\r\n    </div>\r\n</div>","import { Component, OnInit, Input, ChangeDetectorRef, ViewChild, ElementRef } from '@angular/core';\r\nimport { Alert } from '../../models/alert';\r\nimport { UserDetailedDto } from '../../models';\r\nimport { FieldDefinitionService } from '../../services/field-definition-service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { AlertService } from '../../services/alert.service';\r\nimport * as ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport { AlertContext } from '../../models/enums/alert-context.enum';\r\nimport { FieldDefinitionDto } from '../../models/generated/field-definition-dto';\r\nimport { NgbPopover } from '@ng-bootstrap/ng-bootstrap';\r\nimport { FieldDefinitionTypeEnum } from '../../models/enums/field-definition-type.enum';\r\n\r\ndeclare var $ : any\r\n\r\n@Component({\r\n  selector: 'field-definition',\r\n  templateUrl: './field-definition.component.html',\r\n  styleUrls: ['./field-definition.component.scss']\r\n})\r\nexport class FieldDefinitionComponent implements OnInit {\r\n\r\n  @Input() fieldDefinitionType: string;\r\n  @Input() labelOverride: string;\r\n  @ViewChild('p') public popover: NgbPopover;\r\n  @ViewChild('popContent') public content: any;\r\n  public fieldDefinition: FieldDefinitionDto;\r\n  public isLoading: boolean = true;\r\n  public isEditing: boolean = false;\r\n  public emptyContent: boolean = false;\r\n  public watchUserChangeSubscription: any;\r\n  public Editor = ClassicEditor;\r\n  public editedContent: string;\r\n  public editor;\r\n\r\n  currentUser: UserDetailedDto;\r\n\r\n  public ckConfig = {\"removePlugins\": [\"MediaEmbed\", \"ImageUpload\"]};\r\n\r\n  constructor(private fieldDefinitionService: FieldDefinitionService,\r\n    private authenticationService: AuthenticationService,\r\n    private cdr: ChangeDetectorRef,\r\n    private alertService: AlertService,\r\n    private elem: ElementRef) { }\r\n\r\n  ngOnInit() {\r\n    this.fieldDefinitionService.getFieldDefinition(FieldDefinitionTypeEnum[this.fieldDefinitionType]).subscribe(x => {\r\n      this.loadFieldDefinition(x);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.authenticationService.dispose();\r\n    this.cdr.detach();\r\n  }\r\n\r\n  // tell CkEditor to use the class below as its upload adapter\r\n  // see https://ckeditor.com/docs/ckeditor5/latest/framework/guides/deep-dive/upload-adapter.html#how-does-the-image-upload-work\r\n  public ckEditorReady(editor) {\r\n    this.editor = editor;\r\n  }\r\n\r\n  public getLabelText() {\r\n    return this.labelOverride !== null && this.labelOverride !== undefined ? this.labelOverride : this.fieldDefinition.FieldDefinitionType.FieldDefinitionTypeDisplayName;\r\n  }\r\n\r\n  public showEditButton(): boolean {\r\n    return this.authenticationService.isCurrentUserAnAdministrator();\r\n  }\r\n\r\n  public enterEdit(): void {\r\n    this.editedContent = this.fieldDefinition.FieldDefinitionValue ?? \"\";\r\n    this.isEditing = true;\r\n  }\r\n\r\n  public cancelEdit(): void {\r\n    this.isEditing = false;\r\n    this.popover.close();\r\n  }\r\n\r\n  public saveEdit(): void {\r\n    this.isEditing = false;\r\n    this.isLoading = true;\r\n    this.fieldDefinition.FieldDefinitionValue = this.editedContent;\r\n    this.fieldDefinitionService.updateFieldDefinition(this.fieldDefinition).subscribe(x => {\r\n      this.loadFieldDefinition(x);\r\n    }, error => {\r\n      this.isLoading = false;\r\n      this.alertService.pushAlert(new Alert(\"There was an error updating the field definition\", AlertContext.Danger, true));\r\n    });\r\n  }\r\n\r\n  private loadFieldDefinition(fieldDefinition:FieldDefinitionDto)\r\n  {\r\n    this.fieldDefinition = fieldDefinition;\r\n    this.emptyContent = fieldDefinition.FieldDefinitionValue?.length > 0 ? false : true;\r\n    this.isLoading = false;\r\n  }\r\n\r\n  public notEditingMouseEnter() {\r\n    if (!this.isEditing) {\r\n      this.popover.open();\r\n      this.elem.nativeElement.closest('body')\r\n                             .querySelector(\".popover\")\r\n                             .addEventListener('mouseleave', this.mouseLeaveEvent.bind(this));\r\n    }\r\n  }\r\n\r\n  public mouseLeaveEvent() {\r\n    if (!this.isEditing) {\r\n      this.popover.close();\r\n    }\r\n  }\r\n\r\n  public notEditingMouseLeave() {\r\n      setTimeout( () => {\r\n        let hoveringPopover = this.elem.nativeElement.closest('body')\r\n                                                     .querySelector(\".popover:hover\")\r\n        if (!hoveringPopover && !this.isEditing) {\r\n            this.popover.close();\r\n        }\r\n    }, 50);\r\n  }\r\n}\r\n","<div *ngIf=\"isLoading\" class=\"text-center\">\r\n    <span class=\"fa fa-spinner loading-spinner\"></span>\r\n</div>\r\n\r\n<div *ngIf=\"!isLoading\" class=\"d-inline\">\r\n    <ng-template #popTitle>\r\n        <div class=\"row\">\r\n            <div class=\"col-auto mr-auto\">\r\n                <div class=\"mt-1\">{{fieldDefinition.FieldDefinitionType.FieldDefinitionTypeDisplayName}}</div>\r\n            </div>\r\n            <div class=\"col-auto\" *ngIf=\"!isEditing\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-sm-2 pl-0 pr-0\">\r\n                        <button type=\"button\" class=\"btn btn-link\" (click)=\"enterEdit()\">\r\n                            <i class=\"fa fa-pencil-square-o\" attr.aria-label=\"Edit the definition for {{fieldDefinition.FieldDefinitionType.FieldDefinitionTypeDisplayName}}\">\r\n                            </i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template #popContent>\r\n        <ng-container *ngIf=\"!isEditing\">\r\n            <div *ngIf=\"showEditButton()\" style=\"position: relative; min-height: 30px;\">\r\n                <div *ngIf=\"!emptyContent\" [innerHtml]=\"fieldDefinition.FieldDefinitionValue\"></div>\r\n                <div *ngIf=\"emptyContent\" class=\"hoverEmptySpace\"></div>\r\n            </div>\r\n            <div *ngIf=\"!showEditButton()\" [innerHtml]=\"fieldDefinition.FieldDefinitionValue\"></div>\r\n        </ng-container>\r\n        <div *ngIf=\"isEditing\">\r\n            <ckeditor [editor]=\"Editor\" [(ngModel)]=\"editedContent\" (ready)=\"ckEditorReady($event)\" [config]=\"ckConfig\">\r\n            </ckeditor>\r\n            <div style=\"float:right;\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-fresca mt-1 mr-1 mb-1\" (click)=\"saveEdit()\">Save</button>\r\n                <button type=\"button\" class=\"btn btn-sm btn-secondary mt-1 mb-1\" (click)=\"cancelEdit(p)\">Cancel</button>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <ng-container *ngIf=\"showEditButton()\">\r\n        <div class=\"d-inline-block\" (mouseenter)=\"notEditingMouseEnter()\" (mouseleave)=\"notEditingMouseLeave()\">\r\n            <span style=\"overflow:hidden; text-overflow:ellipsis\">\r\n                {{getLabelText()}}\r\n                <i class=\"fas fa-question-circle small\" style=\"cursor: help;\" #p=\"ngbPopover\" [ngbPopover]=\"popContent\"\r\n                    [popoverTitle]=\"popTitle\" triggers=\"manual\" [autoClose]=\"false\"\r\n                    popoverClass=\"popover-override\" container=\"body\">\r\n                </i>\r\n            </span>\r\n        </div>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"!showEditButton()\">\r\n        <span>\r\n            {{getLabelText()}}\r\n            <i class=\"fas fa-question-circle small\" style=\"cursor: help;\" [ngbPopover]=\"popContent\"  popoverClass=\"popover-override\"\r\n                [popoverTitle]=\"fieldDefinition.FieldDefinitionType.FieldDefinitionTypeDisplayName\" triggers=\"mouseenter:mouseleave\" container=\"body\">\r\n            </i>\r\n        </span>\r\n    </ng-container>\r\n</div>","import { Component, OnInit, HostListener, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport { CookieStorageService } from '../../services/cookies/cookie-storage.service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { UserDetailedDto } from '../../models';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\nimport { AlertService } from '../../services/alert.service';\r\nimport { Alert } from '../../models/alert';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AlertContext } from '../../models/enums/alert-context.enum';\r\n\r\n@Component({\r\n    selector: 'header-nav',\r\n    templateUrl: './header-nav.component.html',\r\n    styleUrls: ['./header-nav.component.scss']\r\n})\r\n\r\nexport class HeaderNavComponent implements OnInit, OnDestroy {\r\n    private watchUserChangeSubscription: any;\r\n    private currentUser: UserDetailedDto;\r\n\r\n    windowWidth: number;\r\n\r\n    @HostListener('window:resize', ['$event'])\r\n    resize() {\r\n        this.windowWidth = window.innerWidth;\r\n    }\r\n\r\n    constructor(\r\n        private authenticationService: AuthenticationService,\r\n        private cookieStorageService: CookieStorageService,\r\n        private userService: UserService,\r\n        private alertService: AlertService,\r\n        private cdr: ChangeDetectorRef) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.watchUserChangeSubscription = this.authenticationService.currentUserSetObservable.subscribe(currentUser => {\r\n            this.currentUser = currentUser;\r\n\r\n            if (currentUser && this.isAdministrator()){\r\n                this.userService.getUnassignedUserReport().subscribe(report =>{\r\n                    if (report.Count > 0){\r\n                        this.alertService.pushAlert(new Alert(`There are ${report.Count} users who are waiting for you to configure their account. <a href='/users'>Manage Users</a>.`, AlertContext.Info, true, AlertService.USERS_AWAITING_CONFIGURATION));\r\n                    }\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.watchUserChangeSubscription.unsubscribe();\r\n        this.authenticationService.dispose();\r\n        this.cdr.detach();\r\n    }\r\n\r\n    public isAuthenticated(): boolean {\r\n        return this.authenticationService.isAuthenticated();\r\n    }\r\n\r\n    public isAdministrator(): boolean {\r\n        return this.authenticationService.isUserAnAdministrator(this.currentUser);\r\n    }\r\n\r\n    public isUnassigned(): boolean{\r\n        return this.authenticationService.isUserUnassigned(this.currentUser);\r\n    }\r\n\r\n    public isUnassignedOrDisabled(): boolean{\r\n        return this.authenticationService.isUserUnassigned(this.currentUser) || this.authenticationService.isUserRoleDisabled(this.currentUser);\r\n    }\r\n\r\n    public getUserName() {\r\n        return this.currentUser ? this.currentUser.FullName\r\n            : null;\r\n    }\r\n\r\n    public login(): void {\r\n        this.authenticationService.login();\r\n    }\r\n\r\n    public logout(): void {\r\n        this.authenticationService.logout();\r\n\r\n        setTimeout(() => {\r\n            this.cookieStorageService.removeAll();\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n\r\n\r\n    public platformShortName(): string{\r\n        return environment.platformShortName;\r\n    }\r\n\r\n    public leadOrganizationHomeUrl(): string{\r\n        return environment.leadOrganizationHomeUrl;\r\n    }\r\n\r\n    public leadOrganizationLogoSrc(): string{\r\n        return `assets/main/logos/${environment.leadOrganizationLogoFilename}`;\r\n    }\r\n}\r\n","<nav class=\"navbar navbar-fresca navbar-expand-lg navbar-dark stroke\">\r\n    <a href=\"{{leadOrganizationHomeUrl()}}\" class=\"navbar-brand\" target=\"_blank\">\r\n        <img src=\"{{leadOrganizationLogoSrc()}}\" class=\"navbarLogo\">\r\n    </a>\r\n    <a routerLink=\"/\" routerLinkActive=\"active\" class=\"navbar-brand nav-link\">\r\n        {{platformShortName()}}\r\n    </a>\r\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\"\r\n        aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n        <ul class=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n            <li class=\"nav-item dropdown\" routerLinkActive=\"active\" *ngIf=\"isAdministrator()\">\r\n                <a href=\"#\" class=\"nav-link dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                    aria-expanded=\"false\">\r\n                    View\r\n                </a>\r\n                <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                    <a routerLink=\"/watersheds\" class=\"dropdown-item\">\r\n                        Watersheds\r\n                    </a>\r\n                </div>\r\n            </li>\r\n            <li class=\"nav-item dropdown\" routerLinkActive=\"active\" *ngIf=\"isAdministrator()\">\r\n                <a href=\"#\" class=\"nav-link dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                    aria-expanded=\"false\">\r\n                    Manage\r\n                </a>\r\n                <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                    <a routerLink=\"/users\" class=\"dropdown-item\">\r\n                        Users\r\n                    </a>\r\n                    <a routerLink=\"/labels-and-definitions\" class=\"dropdown-item\">\r\n                        Labels and Definitions\r\n                    </a>\r\n                </div>\r\n            </li>\r\n            <li class=\"nav-item dropdown\" routerLinkActive=\"active\">\r\n                <a href=\"#\" class=\"nav-link dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                    Learn More\r\n                </a>\r\n                <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                    <a routerLink=\"/platform-overview\" class=\"dropdown-item\">\r\n                        Platform Overview\r\n                    </a>\r\n                    <a routerLink=\"/training\" class=\"dropdown-item\">\r\n                        Training\r\n                    </a>\r\n                    <div class=\"dropdown-divider\"></div>\r\n                    <a routerLink=\"/disclaimer/false\" class=\"dropdown-item\">\r\n                        Disclaimer\r\n                    </a>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n        <ul class=\"navbar-nav flex-column mt-2 mt-lg-0 mr-sm-2\">\r\n            <li class=\"nav-item\" routerLinkActive=\"active\" *ngIf=\"!isAuthenticated()\">\r\n                <a href=\"javascript:void(0);\" (click)=\"login()\" routerLinkActive=\"active\" class=\"nav-link\">Sign In</a>\r\n            </li>\r\n            <li class=\"nav-item dropdown welcomeUser\" routerLinkActive=\"active\" *ngIf=\"isAuthenticated()\"> \r\n                <a href=\"#\" class=\"nav-link dropdown-toggle pr-3\" role=\"button\" data-toggle=\"dropdown\"\r\n                    aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                    Welcome {{getUserName()}}\r\n                </a>\r\n                <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\">\r\n                    <a routerLink=\"/help\" class=\"dropdown-item\">\r\n                        Get Help\r\n                    </a>\r\n                    <a href=\"javascript:void(0);\" (click)=\"logout()\" class=\"dropdown-item\">Sign Out</a>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>\r\n","export * from './header-nav/header-nav.component';","import { Component, OnInit, DoCheck, ChangeDetectorRef } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'fresca-watershed-detail-popup',\r\n  templateUrl: './watershed-detail-popup.component.html',\r\n  styleUrls: ['./watershed-detail-popup.component.scss']\r\n})\r\nexport class WatershedDetailPopupComponent implements OnInit {\r\n  constructor(private cdr: ChangeDetectorRef) { }\r\n\r\n  public feature : any;\r\n  \r\n  ngOnInit() {\r\n  }\r\n\r\n  public detectChanges() : void{\r\n    this.cdr.detectChanges();\r\n  } \r\n}\r\n","<dl class=\"row mb-0\">\r\n    <dt class=\"col-5 text-right\">Name</dt>\r\n    <dd class=\"col-7\">\r\n        <a routerLink=\"/watersheds/{{feature.properties.WatershedID}}\" (click)=\"detectChanges()\">\r\n            {{feature.properties.WatershedName}}\r\n        </a>\r\n    </dd>\r\n</dl>","import { AfterViewInit, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ChangeDetectionStrategy, ComponentFactoryResolver, Injector, ApplicationRef, ComponentRef } from '@angular/core';\r\nimport { Feature, FeatureCollection, Polygon } from \"geojson\";\r\nimport { environment } from \"src/environments/environment\";\r\nimport { WfsService } from \"../../services/wfs.service\";\r\nimport {\r\n    Control, FitBoundsOptions,\r\n    GeoJSON,\r\n    GeoJSONOptions,\r\n    LatLng, LeafletEvent,\r\n    LeafletMouseEvent,\r\n    map,\r\n    Map,\r\n    MapOptions,\r\n    Popup,\r\n    tileLayer,\r\n    WMSOptions,\r\n    DomEvent,\r\n    DomUtil,\r\n    LayerGroup\r\n} from 'leaflet';\r\nimport 'leaflet.fullscreen';\r\nimport { forkJoin } from 'rxjs';\r\nimport { WatershedService } from 'src/app/services/watershed/watershed.service';\r\nimport { BoundingBoxDto } from '../../models/bounding-box-dto';\r\nimport { WatershedDetailPopupComponent } from '../watershed-detail-popup/watershed-detail-popup.component';\r\nimport { CustomCompileService } from '../../services/custom-compile.service';\r\n\r\ndeclare var $: any\r\n\r\n@Component({\r\n    selector: 'watershed-map',\r\n    templateUrl: './watershed-map.component.html',\r\n    styleUrls: ['./watershed-map.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class WatershedMapComponent implements OnInit, AfterViewInit {\r\n    @Input()\r\n    public mapID: string = '';\r\n\r\n    @Input()\r\n    public selectedWatershedTransparencyStyle: string = 'watershed_purple';\r\n\r\n    @Input()\r\n    public selectedWatershedLabelStyle: string = \"watershed_name_only\";\r\n\r\n    @Input()\r\n    public selectedWatershedIDs: Array<number> = [];\r\n\r\n    @Input()\r\n    public onEachFeatureCallback?: (feature, layer) => void;\r\n\r\n    @Input()\r\n    public zoomMapToDefaultExtent: boolean = true;\r\n\r\n    @Input()\r\n    public disableDefaultClick: boolean = false;\r\n\r\n    @Input()\r\n    public displaywatershedsLayerOnLoad: boolean = true;\r\n\r\n    @Input()\r\n    public mapHeight: string = '300px';\r\n\r\n    @Input()\r\n    public defaultFitBoundsOptions?: FitBoundsOptions = null;\r\n\r\n    @Input()\r\n    public selectedWatershedLayerName: string = \"<img src='./assets/main/map-legend-images/watershed.png' style='height:16px; margin-bottom:3px'> Selected Watersheds\";\r\n\r\n    @Output()\r\n    public afterSetControl: EventEmitter<Control.Layers> = new EventEmitter();\r\n\r\n    @Output()\r\n    public afterLoadMap: EventEmitter<LeafletEvent> = new EventEmitter();\r\n\r\n    @Output()\r\n    public onMapMoveEnd: EventEmitter<LeafletEvent> = new EventEmitter();\r\n\r\n    public component: any;\r\n\r\n    public map: Map;\r\n    public featureLayer: any;\r\n    public layerControl: Control.Layers;\r\n    public tileLayers: { [key: string]: any } = {};\r\n    public overlayLayers: { [key: string]: any } = {};\r\n    boundingBox: BoundingBoxDto;\r\n    private selectedWatershedTransparencyLayer: any;\r\n    private selectedWatershedLabelLayer: any;\r\n    private selectedWatershedLayerGroup: LayerGroup = new LayerGroup();\r\n    private defaultWatershedsWMSOptions: WMSOptions;\r\n\r\n    constructor(\r\n        private wfsService: WfsService,\r\n        private watershedService: WatershedService,\r\n        private appRef: ApplicationRef,\r\n        private compileService: CustomCompileService\r\n    ) {\r\n    }\r\n\r\n    public ngOnInit(): void {\r\n        // Default bounding box\r\n        this.boundingBox = new BoundingBoxDto();\r\n        this.boundingBox.Left = -122.65840077734131;\r\n        this.boundingBox.Bottom = 44.800395454281436;\r\n        this.boundingBox.Right = -121.65139301718362;\r\n        this.boundingBox.Top = 45.528908149000124;\r\n\r\n        this.tileLayers = Object.assign({}, {\r\n            \"Aerial\": tileLayer('https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\r\n                attribution: 'Aerial',\r\n            }),\r\n            \"Street\": tileLayer('https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {\r\n                attribution: 'Aerial',\r\n            }),\r\n            \"Terrain\": tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {\r\n                attribution: 'Terrain',\r\n            }),\r\n        }, this.tileLayers);\r\n\r\n        this.defaultWatershedsWMSOptions = ({\r\n            layers: \"Fresca:Watersheds\",\r\n            transparent: true,\r\n            format: \"image/png\",\r\n            tiled: true\r\n        } as WMSOptions);\r\n\r\n        let watershedsWMSOptions = this.defaultWatershedsWMSOptions;\r\n\r\n        this.overlayLayers = Object.assign({\r\n            \"<img src='./assets/main/map-legend-images/watershed_outline_only.png' style='height:16px; margin-bottom:3px'> Watersheds\": tileLayer.wms(environment.geoserverMapServiceUrl + \"/wms?\", watershedsWMSOptions)\r\n        }, this.overlayLayers);\r\n\r\n        this.compileService.configure(this.appRef);\r\n    }\r\n\r\n    public updateSelectedWatershedsOverlayLayer(watershedIDs: Array<number>) {\r\n        if (this.selectedWatershedTransparencyLayer && this.selectedWatershedLabelLayer) {\r\n            this.layerControl.removeLayer(this.selectedWatershedLayerGroup);\r\n            this.map.removeLayer(this.selectedWatershedTransparencyLayer);\r\n            this.map.removeLayer(this.selectedWatershedLabelLayer);\r\n        }\r\n\r\n        var wmsParameters = Object.assign({ styles: this.selectedWatershedTransparencyStyle, cql_filter: this.createWatershedMapFilter(watershedIDs) }, this.defaultWatershedsWMSOptions);\r\n        this.selectedWatershedTransparencyLayer = tileLayer.wms(environment.geoserverMapServiceUrl + \"/wms?\", wmsParameters);\r\n        wmsParameters.styles = this.selectedWatershedLabelStyle;\r\n        this.selectedWatershedLabelLayer = tileLayer.wms(environment.geoserverMapServiceUrl + \"/wms?\", wmsParameters);\r\n        this.selectedWatershedLayerGroup.addLayer(this.selectedWatershedTransparencyLayer);\r\n        this.selectedWatershedLayerGroup.addLayer(this.selectedWatershedLabelLayer);\r\n        this.layerControl.addOverlay(this.selectedWatershedLayerGroup, this.selectedWatershedLayerName);\r\n\r\n        this.selectedWatershedLayerGroup.addTo(this.map);\r\n    }\r\n\r\n\r\n    private fitBoundsToSelectedWatersheds(watershedIDs: Array<number>) {\r\n        this.watershedService.getBoundingBoxByWatershedIDs(watershedIDs).subscribe(boundingBox => {\r\n            this.boundingBox = boundingBox;\r\n            this.map.fitBounds([[this.boundingBox.Bottom, this.boundingBox.Left], [this.boundingBox.Top, this.boundingBox.Right]], this.defaultFitBoundsOptions);\r\n        });\r\n    }\r\n\r\n    private createWatershedMapFilter(watershedIDs: Array<number>): any {\r\n        return `WatershedID in (${watershedIDs.join(',')})`;\r\n    }\r\n\r\n    public ngAfterViewInit(): void {\r\n\r\n        const mapOptions: MapOptions = {\r\n            // center: [46.8797, -110],\r\n            // zoom: 6,\r\n            minZoom: 9,\r\n            maxZoom: 17,\r\n            layers: [\r\n                this.tileLayers[\"Aerial\"],\r\n            ],\r\n            fullscreenControl: true\r\n        } as MapOptions;\r\n        this.map = map(this.mapID, mapOptions);\r\n\r\n        this.map.on('load', (event: LeafletEvent) => {\r\n            this.afterLoadMap.emit(event);\r\n        });\r\n        this.map.on(\"moveend\", (event: LeafletEvent) => {\r\n            this.onMapMoveEnd.emit(event);\r\n        });\r\n        this.map.fitBounds([[this.boundingBox.Bottom, this.boundingBox.Left], [this.boundingBox.Top, this.boundingBox.Right]], this.defaultFitBoundsOptions);\r\n\r\n        this.setControl();\r\n        this.registerClickEvents();\r\n\r\n        if (this.selectedWatershedIDs.length > 0) {\r\n            this.updateSelectedWatershedsOverlayLayer(this.selectedWatershedIDs);\r\n            this.fitBoundsToSelectedWatersheds(this.selectedWatershedIDs);\r\n        }\r\n\r\n        if (!this.disableDefaultClick) {\r\n            const wfsService = this.wfsService;\r\n            const self = this;\r\n            this.map.on(\"click\", (event: LeafletMouseEvent): void => {\r\n                wfsService.getWatershedByCoordinate(event.latlng.lng, event.latlng.lat)\r\n                    .subscribe((watershedFeatureCollection: FeatureCollection) => {\r\n                        watershedFeatureCollection.features\r\n                            .forEach((feature: Feature) => {\r\n                                // Flip the coordinates\r\n                                switch (feature.geometry.type) {\r\n                                    case \"Polygon\":\r\n                                        const polygon: Polygon = feature.geometry as Polygon;\r\n                                        polygon.coordinates = polygon.coordinates\r\n                                            .map(coordinate => coordinate.map(point => [point[1], point[0]]));\r\n                                        break;\r\n                                }\r\n                                new Popup({\r\n                                    minWidth: 200,\r\n                                })\r\n                                    .setLatLng(event.latlng)\r\n                                    .setContent(this.compileService.compile(WatershedDetailPopupComponent, (c) => { c.instance.feature = feature; })\r\n                                    )\r\n                                    .openOn(self.map);\r\n                            });\r\n                    });\r\n            });\r\n        }\r\n    }\r\n\r\n    public setControl(): void {\r\n        this.layerControl = new Control.Layers(this.tileLayers, this.overlayLayers, { collapsed: false })\r\n            .addTo(this.map);\r\n        if (this.displaywatershedsLayerOnLoad) {\r\n            this.overlayLayers[\"<img src='./assets/main/map-legend-images/watershed_outline_only.png' style='height:16px; margin-bottom:3px'> Watersheds\"].addTo(this.map);\r\n        }\r\n        this.afterSetControl.emit(this.layerControl);\r\n    }\r\n\r\n    public registerClickEvents(): void {\r\n        var leafletControlLayersSelector = \".leaflet-control-layers\";\r\n        var closeButtonClass = \"leaflet-control-layers-close\";\r\n\r\n        var closem = DomUtil.create(\"a\", closeButtonClass);\r\n        closem.innerHTML = \"Close\";\r\n        DomEvent.on(closem,\r\n            \"click\",\r\n            function (e) {\r\n                $(leafletControlLayersSelector).removeClass(\"leaflet-control-layers-expanded\");\r\n            });\r\n\r\n        $(leafletControlLayersSelector).append(closem);\r\n    }\r\n}\r\n\r\n","<div id={{mapID}} class=\"location-card\" [style.height]=\"mapHeight\"></div>\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from \"rxjs/operators\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AcknowledgedDisclaimerGuard implements CanActivate {\r\n\r\n  constructor(private router: Router, private authenticationService: AuthenticationService) {\r\n  }\r\n\r\n  canActivate(\r\n    next: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n      if(!this.authenticationService.isCurrentUserNullOrUndefined()) {\r\n        if (!this.authenticationService.hasCurrentUserAcknowledgedDisclaimer()) {\r\n          this.router.navigate([\"/disclaimer/true\"], {\r\n            queryParams: {\r\n              return: state.url\r\n            }\r\n          });\r\n          return false;\r\n        }\r\n        else {\r\n          return true;\r\n        }\r\n      }\r\n      \r\n      return this.authenticationService.currentUserSetObservable\r\n      .pipe(\r\n        map(x => {\r\n          if (x.DisclaimerAcknowledgedDate != null) {\r\n            return true;\r\n          } else {\r\n            this.router.navigate([\"/disclaimer/true\"], {\r\n              queryParams: {\r\n                return: state.url\r\n              }\r\n            });\r\n            return false;\r\n          }\r\n        })\r\n      );\r\n  }\r\n  \r\n}\r\n","import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router } from '@angular/router';\r\nimport { Observable } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\nimport { Injectable } from '@angular/core';\r\nimport { AlertService } from '../../services/alert.service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { RoleEnum } from '../../models/enums/role.enum';\r\nimport { Alert } from '../../models/alert';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ManagerOnlyGuard implements CanActivate {\r\n  constructor(private router: Router, private alertService: AlertService, private authenticationService: AuthenticationService) {\r\n  }\r\n  canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.authenticationService.isCurrentUserNullOrUndefined()) {\r\n      if (this.authenticationService.isCurrentUserAnAdministrator()) {\r\n        return true;\r\n      } else {\r\n        this.alertService.pushNotFoundUnauthorizedAlert();\r\n        this.router.navigate([\"/\"]);\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return this.authenticationService.currentUserSetObservable\r\n      .pipe(\r\n        map(x => {\r\n          if (x.Role.RoleID == RoleEnum.Admin) {\r\n            return true;\r\n          } else {\r\n            this.alertService.pushNotFoundUnauthorizedAlert();\r\n            this.router.navigate([\"/\"]);\r\n            return false;\r\n          }\r\n        })\r\n      );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { CookieStorageService } from '../../services/cookies/cookie-storage.service';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UnauthenticatedAccessGuard implements CanActivate {\r\n\r\n  constructor(private cookieStorageService: CookieStorageService, private router: Router, private authenticationService: AuthenticationService) {\r\n  }\r\n\r\n  canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\r\n    const token = this.cookieStorageService.getItem('access_token');\r\n    if (token) {\r\n      return true;\r\n    } else {\r\n      sessionStorage[\"authRedirectUrl\"] = state.url;\r\n      this.authenticationService.login()\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n","import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { CookieStorageService } from '../services/cookies/cookie-storage.service';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AuthInterceptor implements HttpInterceptor {\r\n\r\n    constructor(private injector: Injector) {\r\n    }\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        let nextEvent: HttpRequest<any> = req;\r\n\r\n        if (req.url.indexOf('keystone') < 0 && req.url.indexOf('WFS') < 0) {\r\n            const cookieStorageService = this.injector.get(CookieStorageService);\r\n            const token = cookieStorageService.getItem('access_token');\r\n            if (token) {\r\n                nextEvent = req.clone({\r\n                headers: req.headers.set('Authorization', `Bearer ${token}`)\r\n                });\r\n            } else {\r\n                console.warn('no auth token');\r\n            }\r\n        }\r\n\r\n        return next.handle(nextEvent);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n    HttpInterceptor,\r\n    HttpRequest,\r\n    HttpErrorResponse,\r\n    HttpHandler,\r\n    HttpEvent,\r\n    HttpResponse\r\n} from '@angular/common/http';\r\n\r\nimport { Observable, EMPTY, throwError, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\nimport { AlertService } from '../services/alert.service';\r\nimport { AlertContext } from '../models/enums/alert-context.enum';\r\nimport { Alert } from '../models/alert';\r\n\r\n@Injectable()\r\nexport class HttpErrorInterceptor implements HttpInterceptor {\r\n    constructor(private router: Router, private alertService: AlertService) {\r\n    }\r\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n        return next.handle(request).pipe(\r\n            catchError((error: HttpErrorResponse) => {\r\n                if (error.error instanceof Error) {\r\n                    // A client-side or network error occurred. Handle it accordingly.\r\n                    console.error('An error occurred:', error.error.message);\r\n                }\r\n                else {\r\n                    // The backend returned an unsuccessful response code.\r\n                    // The response body may contain clues as to what went wrong,\r\n                    console.error(`Backend returned code ${error.status}, body was: ${error.error}`);\r\n\r\n                    if (error instanceof HttpErrorResponse) {\r\n                        if (error.status == 401) {\r\n                            this.router.navigateByUrl(\"/unauthenticated\", { replaceUrl: false}).then(x => {\r\n                                if(typeof error.error === \"string\") {\r\n                                    this.alertService.pushAlert(new Alert(error.error, AlertContext.Danger));\r\n                                }\r\n                            });\r\n                        }\r\n                        if (error.status == 403) {\r\n                            this.router.navigateByUrl(\"/subscription-insufficient\", { replaceUrl: false}).then(x => {\r\n                                if(typeof error.error === \"string\") {\r\n                                    this.alertService.pushAlert(new Alert(error.error, AlertContext.Danger));\r\n                                }\r\n                            });\r\n                        }\r\n                        if (error.status == 404) {\r\n                            if(error.error.includes(\"User with GUID \"))\r\n                            {\r\n                                // we want the login-callback to create the user to trigger so we just let it pass through and have authentication-service handle it\r\n                                return throwError(error);\r\n                            }\r\n                            else\r\n                            {\r\n                                this.router.navigateByUrl(\"/not-found\", { replaceUrl: false}).then(x => {\r\n                                    if(typeof error.error === \"string\") {\r\n                                        this.alertService.pushAlert(new Alert(error.error, AlertContext.Danger));\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // If you want to return a new response:\r\n                //return of(new HttpResponse({body: [{name: \"Default value...\"}]}));\r\n\r\n                // If you want to return nothing:\r\n                //return EMPTY;\r\n\r\n                // Otherwise pass it on to the upper level and let them take care of it:\r\n                return throwError(error);\r\n            })\r\n        );\r\n    }\r\n}","import {AlertContext} from \"./enums/alert-context.enum\";\r\n\r\nexport class Alert {\r\n    constructor(\r\n        public message: string,\r\n        public context: AlertContext = AlertContext.Primary,\r\n        public dismissable: boolean = true,\r\n        public uniqueCode: string = \"\"\r\n    ) {\r\n    }\r\n}\r\n","export class BoundingBoxDto {\r\n    Left : number;\r\n    Bottom : number;\r\n    Right : number;\r\n    Top : number;\r\n\r\n    constructor(obj?: any) {\r\n        Object.assign(this, obj);\r\n    }\r\n}\r\n","import { CustomRichTextDto } from \"./generated/custom-rich-text-dto\"\r\nexport class CustomRichTextDetailedDto extends CustomRichTextDto{\r\n    public IsEmptyContent: boolean;\r\n\r\n    constructor(obj?: any){\r\n        super();\r\n        Object.assign(this, obj);\r\n    }\r\n}","export enum AlertContext {\r\n    Primary = \"primary\",\r\n    Secondary = \"secondary\",\r\n    Success = \"success\",\r\n    Danger = \"danger\",\r\n    Warning = \"warning\",\r\n    Info = \"info\",\r\n    Light = \"light\",\r\n    Dark = \"dark\"\r\n}\r\n","export enum CustomRichTextType{\r\n    PlatformOverview = 1,\r\n    Disclaimer = 2,\r\n    Homepage = 3,\r\n    Help = 4,\r\n    LabelsAndDefinitionsList = 5,\r\n    WatershedList = 6,\r\n    Training = 7\r\n}","export enum FieldDefinitionTypeEnum {\r\n    Name = 1\r\n}","export enum RoleEnum {\r\n  Admin = 1,\r\n  Landowner = 2,\r\n  Unassigned = 3,\r\n  Disabled = 4,\r\n}\r\n","//  IMPORTANT:\r\n//  This file is generated. Your changes will be lost.\r\n//  Use the corresponding partial class for customizations.\r\n//  Source Table: [dbo].[CustomRichText]\r\nimport { CustomRichTextTypeDto } from './custom-rich-text-type-dto'\r\n\r\nexport class CustomRichTextDto {\r\n\tCustomRichTextID : number\r\n\tCustomRichTextType : CustomRichTextTypeDto\r\n\tCustomRichTextContent : string\r\n\r\n    constructor(obj?: any) {\r\n        Object.assign(this, obj);\r\n    }\r\n}","export class UserCreateDto {\r\n    FirstName: string;\r\n    LastName: string;\r\n    Email: string;\r\n    OrganizationName: string;\r\n    PhoneNumber: string;\r\n    RoleID: number;\r\n    LoginName: string;\r\n    UserGuid: string;\r\n    constructor(obj?: any) {\r\n        Object.assign(this, obj);\r\n    }\r\n}\r\n","export class UserInviteDto {\r\n    RoleID: number;\r\n    FirstName: string;\r\n    LastName: string;\r\n    Email: string;\r\n}\r\n\r\n","export class UserUpdateDto {\r\n    RoleID: number;\r\n    ReceiveSupportEmails:boolean;\r\n}\r\n","export * from './not-found/not-found.component';\r\nexport * from './unauthenticated/unauthenticated.component';\r\nexport * from './subscription-insufficient/subscription-insufficient.component';","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'not-found',\r\n  templateUrl: './not-found.component.html',\r\n  styleUrls: ['./not-found.component.scss']\r\n})\r\nexport class NotFoundComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<div class=\"container mt-sm-4\">\r\n    <h2>Page Not Found</h2>\r\n    <p>Oh no! It appears the page you are trying to reach doesn't exist.</p>\r\n    <app-alert-display></app-alert-display>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'subscription-insufficient',\r\n  templateUrl: './subscription-insufficient.component.html',\r\n  styleUrls: ['./subscription-insufficient.component.scss']\r\n})\r\nexport class SubscriptionInsufficientComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<div class=\"jumbotron jumbotron-fluid\">\r\n  <div class=\"container\">\r\n      <h2>Page Not Found</h2>\r\n      <p class=\"lead\">\r\n        You are currently not authorized to view this page. \r\n      </p>\r\n  </div>\r\n</div>\r\n<div class=\"container my-sm-4\">\r\n  <!-- <app-alert-display></app-alert-display> -->\r\n  <div class=\"col-md-6 offset-md-3\">\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'unauthenticated',\r\n  templateUrl: './unauthenticated.component.html',\r\n  styleUrls: ['./unauthenticated.component.scss']\r\n})\r\nexport class UnauthenticatedComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<p>\r\n  unauthenticated works!\r\n</p>\r\n","import {Injectable} from '@angular/core';\r\nimport {Alert} from '../models/alert';\r\nimport { AlertContext } from '../models/enums/alert-context.enum';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AlertService {\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    public alerts: Alert[] = [];\r\n    public alertSubject: BehaviorSubject<Alert[]> = new BehaviorSubject([]);\r\n\r\n\r\n    pushAlert(alert: Alert): void {\r\n        if (alert.uniqueCode ){\r\n            if (this.alerts.some(x=>x.uniqueCode === alert.uniqueCode)){\r\n                return; // don't push a duplicate alert if it has a unique token.\r\n            }\r\n        }\r\n\r\n        this.alerts.push(alert);\r\n        this.alertSubject.next(this.alerts);\r\n    }\r\n\r\n    removeAlert(alert: Alert): void {\r\n        const index: number = this.alerts.indexOf(alert);\r\n        this.alerts.splice(index, 1);\r\n        this.alertSubject.next(this.alerts);\r\n    }\r\n\r\n    getAlerts(): Alert[] {\r\n        return this.alerts;\r\n    }\r\n\r\n    clearAlerts(): void {\r\n        this.alerts = [];\r\n        this.alertSubject.next(this.alerts);\r\n    }\r\n\r\n    pushNotFoundUnauthorizedAlert(){\r\n        this.pushAlert(new Alert(\"The page you are trying to access was not found, or you do not have permission to view it.\", AlertContext.Info, true, AlertService.NOT_FOUND_UNAUTHORIZED));\r\n        this.alertSubject.next(this.alerts);\r\n    }\r\n\r\n\r\n    public static NOT_FOUND_UNAUTHORIZED = \"NotFoundUnauthorized\";\r\n    public static USERS_AWAITING_CONFIGURATION = \"UsersAwaitingConfiguration\";\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiRouteService {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  getRoute(): string {\r\n    const programApiRoute = `https://${environment.apiHostName}`;\r\n    return programApiRoute;\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { ApiRouteService } from '../api-route/api-route.service';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, throwError as _throw } from 'rxjs';\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { BusyService } from '../busy/busy.service';\r\nimport { AlertService } from '../alert.service';\r\nimport { Alert } from 'src/app/shared/models/alert';\r\nimport { OAuthService } from 'angular-oauth2-oidc';\r\nimport { AlertContext } from '../../models/enums/alert-context.enum';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ApiService {\r\n\r\n    constructor(private busyService: BusyService, private apiRoute: ApiRouteService, private http: HttpClient, private alertService: AlertService, private oauthService: OAuthService, private router: Router, ) {\r\n    }\r\n\r\n    postToApi(relativeRoute: string, data: any): Observable<any> {\r\n\r\n        this.busyService.setBusy(true);\r\n\r\n        if (relativeRoute.startsWith('/')) {\r\n            relativeRoute = relativeRoute.substring(1, relativeRoute.length);\r\n        }\r\n\r\n        data = JSON.parse(JSON.stringify(data, this.requestCleaner));\r\n\r\n        const baseRoute = this.apiRoute.getRoute();\r\n        const route = `${baseRoute}/${relativeRoute}`;\r\n\r\n        return this.http.post(route, data)\r\n            .pipe(\r\n                map((response: any) => {\r\n                    return this.handleResponse(response);\r\n                }),\r\n                catchError((error: any) => {\r\n                    return this.handleError(error);\r\n                })\r\n            );\r\n    }\r\n\r\n    getFromApi(relativeRoute: string): Observable<any> {\r\n\r\n        this.busyService.setBusy(true);\r\n\r\n        if (relativeRoute.startsWith('/')) {\r\n            relativeRoute = relativeRoute.substring(1, relativeRoute.length);\r\n        }\r\n\r\n        const baseRoute = this.apiRoute.getRoute();\r\n        const route = `${baseRoute}/${relativeRoute}`;\r\n        const result = this.http.get(route)\r\n            .pipe(\r\n                map((response: any) => {\r\n                    return this.handleResponse(response);\r\n                }),\r\n                catchError((error: any) => {\r\n                    return this.handleError(error);\r\n                })\r\n            );\r\n        return result;\r\n    }\r\n\r\n    putToApi(relativeRoute: string, data: any): Observable<any> {\r\n\r\n        this.busyService.setBusy(true);\r\n\r\n        if (relativeRoute.startsWith('/')) {\r\n            relativeRoute = relativeRoute.substring(1, relativeRoute.length);\r\n        }\r\n\r\n        data = JSON.parse(JSON.stringify(data, this.requestCleaner));\r\n\r\n        const baseRoute = this.apiRoute.getRoute();\r\n        const route = `${baseRoute}/${relativeRoute}`;\r\n\r\n        return this.http.put(route, data)\r\n            .pipe(\r\n                map((response: any) => {\r\n                    return this.handleResponse(response);\r\n                }),\r\n                catchError((error: any) => {\r\n                    return this.handleError(error);\r\n                })\r\n            );\r\n    }\r\n\r\n    deleteToApi(relativeRoute: string): Observable<any> {\r\n\r\n        this.busyService.setBusy(true);\r\n        if (relativeRoute.startsWith('/')) {\r\n            relativeRoute = relativeRoute.substring(1, relativeRoute.length);\r\n        }\r\n        const baseRoute = this.apiRoute.getRoute();\r\n        const route = `${baseRoute}/${relativeRoute}`;\r\n\r\n        return this.http.delete(route)\r\n            .pipe(\r\n                map((response: any) => {\r\n                    return this.handleResponse(response);\r\n                }),\r\n                catchError((error: any) => {\r\n                    return this.handleError(error);\r\n                })\r\n            );\r\n    }\r\n\r\n\r\n\r\n    handleResponse(response: any): Observable<any> {\r\n        this.busyService.setBusy(false);\r\n        return response;\r\n    }\r\n\r\n    private handleError(error: any, supressErrorMessage = false, clearBusyGlobally = true): Observable<any> {\r\n        if (clearBusyGlobally) {\r\n            this.busyService.setBusy(false);\r\n        }\r\n\r\n        if (!supressErrorMessage) {\r\n            if (error && (error.status === 401)) {\r\n                this.alertService.pushAlert(new Alert(\"Access token expired...\"));\r\n                this.oauthService.initImplicitFlow();\r\n            } else if (error && (error.status === 403)) {\r\n                this.alertService.pushNotFoundUnauthorizedAlert();\r\n                this.router.navigate([\"/\"]);\r\n            } else if (error.error && typeof error.error === 'string') {\r\n                this.alertService.pushNotFoundUnauthorizedAlert();\r\n                this.alertService.pushAlert(new Alert(error.error));\r\n            } else if (error.error && error.status === 404) {\r\n                // let the caller handle not found appropriate to whatever it was doing\r\n            } else if (error.error && !(error.error instanceof ProgressEvent)) {\r\n                for (const key of Object.keys(error.error)) {\r\n                    // FIXME: will break if errror.error[key] is not a string[]\r\n                    const newLocal = new Alert((error.error[key] as string[]).map((fe: string) => { return key + \": \" + fe; }).join(\",\"));\r\n                    this.alertService.pushAlert(newLocal);\r\n                }\r\n            } else {\r\n                this.alertService.pushAlert(new Alert(\"Oops! Something went wrong and we couldn't complete the action...\"));\r\n            }\r\n        }\r\n\r\n        return _throw(error);\r\n    }\r\n\r\n    private requestCleaner(name: string, val: any) {\r\n        if ((name || '').toString().indexOf('$') === 0) {\r\n            return undefined; // remove from data\r\n        } else {\r\n            return val; // return as is\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApplicationInsights, ITelemetryItem, IDependencyTelemetry } from '@microsoft/applicationinsights-web';\r\nimport { environment } from 'src/environments/environment';\r\nconst { name, version } = require('../../../../package.json');\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AppInsightsService {\r\n\r\n  constructor() { }\r\n\r\n  initAppInsights() {\r\n    const appInsights = new ApplicationInsights({\r\n      config: {\r\n        appId: name + '@' + version,\r\n        enableAutoRouteTracking: true, \r\n        disableFetchTracking: false,\r\n        enableCorsCorrelation: true,\r\n        enableRequestHeaderTracking: true,\r\n        enableResponseHeaderTracking: true,\r\n        correlationHeaderExcludedDomains: ['keystone.sitkatech.com', 'qa.keystone.sitkatech.com', new URL(environment.geoserverMapServiceUrl).hostname],\r\n        instrumentationKey: environment.appInsightsInstrumentationKey,\r\n        maxAjaxCallsPerView: -1,\r\n      }\r\n    });\r\n\r\n    appInsights.loadAppInsights();\r\n\r\n    appInsights.addTelemetryInitializer((item: ITelemetryItem) => {\r\n      if (\r\n        item &&\r\n        item.baseData &&\r\n        [0, 401].indexOf((item.baseData as IDependencyTelemetry).responseCode) >= 0\r\n      ) {\r\n        return false;\r\n      }\r\n    }); \r\n    appInsights.addTelemetryInitializer((envelope) => {\r\n      envelope.tags[\"ai.cloud.role\"] = environment.keystoneAuthConfiguration.clientId + \".Web\";\r\n    });\r\n\r\n    (window as any).appInsights = appInsights;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\nexport interface Busy {\r\n  show: boolean;\r\n  text?: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BusyService {\r\n\r\n  private busySubject: Subject<Busy>;\r\n  private startTime: number;\r\n  private timeoutInterval: any;\r\n\r\n  constructor() {\r\n    this.busySubject = new Subject();\r\n  }\r\n\r\n  getBusy$(): Observable<Busy> {\r\n    return this.busySubject.asObservable();\r\n  }\r\n\r\n  setBusy(show: boolean, text?: string) {\r\n    this.startTime = performance.now();\r\n\r\n    setTimeout(() => {\r\n      if (show) {\r\n        this.setTimeoutIntervalCheck();\r\n      } else {\r\n        this.clearTimeoutInterval();\r\n      }\r\n\r\n      this.busySubject.next({\r\n        show: show,\r\n        text: text || '',\r\n      });\r\n    });\r\n  }\r\n\r\n  private setTimeoutIntervalCheck() {\r\n    if (!this.timeoutInterval) {\r\n      this.timeoutInterval = setInterval(() => {\r\n        if (performance.now() - this.startTime > 30 * 1000) {\r\n          this.clearTimeoutInterval();\r\n          this.busySubject.next({ show: false });\r\n          // this.messageService.add({\r\n          //   severity: 'error',\r\n          //   summary: 'Timeout',\r\n          //   detail: `Oops! Something went wrong and the operation timed-out.<br>\r\n          //            You may want to retry the operation...`\r\n          // });\r\n        }\r\n      }, 5 * 1000);\r\n    }\r\n  }\r\n\r\n  private clearTimeoutInterval() {\r\n    if (this.timeoutInterval) {\r\n      clearInterval(this.timeoutInterval);\r\n      this.timeoutInterval = 0;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { OAuthStorage } from 'angular-oauth2-oidc';\r\nimport { CookieService } from 'ngx-cookie-service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CookieStorageService extends OAuthStorage {\r\n  constructor(private cookieService: CookieService) {\r\n    super();\r\n  }\r\n\r\n  getItem(key: string): string | null {\r\n      return this.cookieService.get(key);\r\n  }\r\n\r\n  removeItem(key: string): void {\r\n    return this.cookieService.delete(key);\r\n  }\r\n\r\n  removeAll(): void {\r\n    return this.cookieService.deleteAll();\r\n  }\r\n\r\n  setItem(key: string, data: string): void {\r\n    return this.cookieService.set(key, data)\r\n  }\r\n}\r\n","import { Injectable, ApplicationRef, Injector, ComponentFactoryResolver } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CustomCompileService {\r\n\r\n  private appRef: ApplicationRef;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private resolver: ComponentFactoryResolver\r\n  ) { }\r\n\r\n  configure(appRef) {\r\n    this.appRef = appRef;\r\n  }\r\n\r\n  compile(component, onAttach) {\r\n    const compFactory = this.resolver.resolveComponentFactory(component);\r\n    let compRef = compFactory.create(this.injector);\r\n\r\n    if (onAttach) {\r\n      onAttach(compRef);\r\n    }\r\n\r\n    this.appRef.attachView(compRef.hostView);\r\n    compRef.onDestroy(() => this.appRef.detachView(compRef.hostView));\r\n\r\n    let div = document.createElement('div');\r\n    div.appendChild(compRef.location.nativeElement);\r\n    return div;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from '.';\r\nimport { Observable } from 'rxjs';\r\nimport { CustomRichTextDetailedDto } from '../models/custom-rich-text-detailed-dto';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CustomRichTextService {\r\n\r\n  constructor(private apiService: ApiService, private httpClient: HttpClient) { }\r\n\r\n  public getCustomRichText(customRichTextTypeID: number): Observable<CustomRichTextDetailedDto> {\r\n    return this.apiService.getFromApi(`/customRichText/${customRichTextTypeID}`)\r\n  }\r\n\r\n  public updateCustomRichText(customRichTextTypeID: number, updateDto: CustomRichTextDetailedDto): Observable<CustomRichTextDetailedDto> {\r\n    return this.apiService.putToApi(`customRichText/${customRichTextTypeID}`, updateDto);\r\n  }\r\n\r\n  uploadFile(file: any): Observable<any> {\r\n    const apiHostName = environment.apiHostName\r\n    const route = `https://${apiHostName}/FileResource/CkEditorUpload`;\r\n    var result = this.httpClient.post<any>(\r\n      route,\r\n      file, // Send the File Blob as the POST body.\r\n      {\r\n        // NOTE: Because we are posting a Blob (File is a specialized Blob\r\n        // object) as the POST body, we have to include the Content-Type\r\n        // header. If we don't, the server will try to parse the body as\r\n        // plain text.\r\n        headers: {\r\n          \"Content-Type\": file.type\r\n        },\r\n        params: {\r\n          clientFilename: file.name,\r\n          mimeType: file.type\r\n        }\r\n      }\r\n    );\r\n\r\n    return result;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from '.';\r\nimport { Observable } from 'rxjs';\r\nimport { FieldDefinitionDto } from '../models/generated/field-definition-dto';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FieldDefinitionService {\r\n\r\n  constructor(private apiService: ApiService) { }\r\n\r\n  public listAllFieldDefinitions(): Observable<Array<FieldDefinitionDto>> {\r\n    return this.apiService.getFromApi(`/fieldDefinitions`);\r\n  }\r\n\r\n  public getFieldDefinition(fieldDefinitionTypeID: number): Observable<FieldDefinitionDto> {\r\n    return this.apiService.getFromApi(`/fieldDefinitions/${fieldDefinitionTypeID}`);\r\n  }\r\n\r\n  public updateFieldDefinition(fieldDefinition: FieldDefinitionDto): Observable<FieldDefinitionDto> {\r\n    return this.apiService.putToApi(`fieldDefinitions/${fieldDefinition.FieldDefinitionType.FieldDefinitionTypeID}`, fieldDefinition);\r\n  }\r\n}","import { Injectable, Injector } from '@angular/core';\r\nimport { BusyService } from '.';\r\nimport { Alert } from '../models/alert';\r\nimport { AlertService } from './alert.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GlobalErrorHandlerService {\r\n\r\n  private busyService: BusyService;\r\n  private alertService: AlertService;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n  ) {\r\n    this.busyService = this.injector.get(BusyService);\r\n    this.alertService = this.injector.get(AlertService);\r\n  }\r\n\r\n  handleError(error: any) {\r\n    if (\r\n      error &&\r\n      error.status !== 401 && // Unauthorized\r\n      error.status !== 403 && // Forbidden\r\n      error.status !== 404 && // Not Found (can easily happen when looking for a unexisting .po file)\r\n      (error.message || '').indexOf('ViewDestroyedError: Attempt to use a destroyed view: detectChanges') < 0 && // issue in the ngx-loading package...waiting for it to be updated.\r\n      (error.message || '').indexOf('ExpressionChangedAfterItHasBeenCheckedError') < 0 && // this only happens in dev angular build - I'm sure\r\n      (error.message || '').indexOf('Loading chunk') < 0 && // also ignore loading chunk errors as they're handled in app.component NavigationError event\r\n      (error.message || '').indexOf('<path> attribute d: Expected number,') < 0 // attrTween.js error related to charts\r\n    ) {\r\n      // IE Bug\r\n      if ((error.message || '').indexOf('available to complete this operation.') >= 0) {\r\n        this.alertService.pushAlert(\r\n          new Alert(`Internet Explorer Error: ${error.message}`)\r\n        );\r\n      }\r\n\r\n      console.error(error);\r\n      if ((window as any).appInsights) {\r\n        (window as any).appInsights.trackException({\r\n          exception: error.originalError || error\r\n        });\r\n      }\r\n    } else if (error) {\r\n      console.warn(error);\r\n      this.busyService.setBusy(false);\r\n    }\r\n  }\r\n}\r\n","export * from './api/api.service';\r\nexport * from './busy/busy.service';","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {FeatureCollection} from \"geojson\";\r\nimport {Observable, Subject} from \"rxjs\";\r\nimport {map, takeUntil} from \"rxjs/operators\";\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class WfsService {\r\n\r\n    private getWatershedIDsIntersectingUnsubscribe: Subject<void> = new Subject<void>();\r\n\r\n    constructor(\r\n        private http: HttpClient,\r\n    ) {\r\n    }\r\n\r\n    public getWatershedByCoordinate(longitude: number, latitude: number): Observable<FeatureCollection> {\r\n        const url: string = `${environment.geoserverMapServiceUrl}/wms`;\r\n        return this.http.get<FeatureCollection>(url, {\r\n            params: {\r\n                service: 'WFS',\r\n                version: '2.0',\r\n                request: 'GetFeature',\r\n                outputFormat: 'application/json',\r\n                SrsName: 'EPSG:4326',\r\n                typeName: 'Fresca:Watersheds',\r\n                cql_filter: `intersects(WatershedGeometry4326, POINT(${latitude} ${longitude}))`\r\n            }\r\n        });\r\n    }\r\n    \r\n    public getWatershedIdsIntersecting(lon1: number, lon2: number, lat1: number, lat2: number): Observable<number[]> {\r\n        this.getWatershedIDsIntersectingUnsubscribe.next();\r\n\r\n        const url: string = `${environment.geoserverMapServiceUrl}/wms`;\r\n        return this.http.get(url, {\r\n            responseType: \"text\",\r\n            params: {\r\n                service: \"wfs\",\r\n                version: \"2.0\",\r\n                request: \"GetPropertyValue\",\r\n                SrsName: \"EPSG:4326\",\r\n                typeName: \"Fresca:Watersheds\",\r\n                valueReference: \"WatershedID\",\r\n                cql_filter: `bbox(WatershedGeometry4326,${lat1},${lon1},${lat2},${lon2})`,\r\n            },\r\n        })\r\n            .pipe(\r\n                takeUntil(this.getWatershedIDsIntersectingUnsubscribe),\r\n                map((rawData: string) => {\r\n                    // Parse XML to retrieve nodes\r\n                    const watershedIDNodes: HTMLCollection = new DOMParser()\r\n                        .parseFromString(rawData, \"text/xml\")\r\n                        .getElementsByTagName(\"heartwood:watershedId\");\r\n\r\n                    const watershedIDs: number[] = [];\r\n                    for (let i = 0; i < watershedIDNodes.length; i++) {\r\n                        watershedIDs.push(parseInt(watershedIDNodes[i].innerHTML))\r\n                    }\r\n                    return watershedIDs;\r\n                })\r\n            );\r\n\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { NotFoundComponent } from './pages';\r\nimport { HeaderNavComponent } from './components';\r\nimport { UnauthenticatedComponent } from './pages/unauthenticated/unauthenticated.component';\r\nimport { SubscriptionInsufficientComponent } from './pages/subscription-insufficient/subscription-insufficient.component';\r\nimport { NgProgressModule } from '@ngx-progressbar/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { WatershedDetailPopupComponent } from './components/watershed-detail-popup/watershed-detail-popup.component';\r\nimport { LinkRendererComponent } from './components/ag-grid/link-renderer/link-renderer.component';\r\nimport { FontAwesomeIconLinkRendererComponent } from './components/ag-grid/fontawesome-icon-link-renderer/fontawesome-icon-link-renderer.component';\r\nimport { WatershedMapComponent } from './components/watershed-map/watershed-map.component';\r\nimport { MultiLinkRendererComponent } from './components/ag-grid/multi-link-renderer/multi-link-renderer.component';\r\nimport { SelectDropDownModule } from 'ngx-select-dropdown';\r\nimport { CustomRichTextComponent } from './components/custom-rich-text/custom-rich-text.component'\r\nimport { CKEditorModule } from '@ckeditor/ckeditor5-angular';\r\nimport { FieldDefinitionComponent } from './components/field-definition/field-definition.component';\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { AlertDisplayComponent } from './components/alert-display/alert-display.component';\r\nimport { FieldDefinitionGridHeaderComponent } from './components/field-definition-grid-header/field-definition-grid-header.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AlertDisplayComponent,\r\n        HeaderNavComponent,\r\n        NotFoundComponent,\r\n        UnauthenticatedComponent,\r\n        SubscriptionInsufficientComponent,\r\n        WatershedMapComponent,\r\n        WatershedDetailPopupComponent,\r\n        LinkRendererComponent,\r\n        FontAwesomeIconLinkRendererComponent,\r\n        MultiLinkRendererComponent,\r\n        CustomRichTextComponent,\r\n        FieldDefinitionComponent,\r\n        FieldDefinitionGridHeaderComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        HttpClientModule,\r\n        NgProgressModule,\r\n        RouterModule,\r\n        SelectDropDownModule,\r\n        CKEditorModule,\r\n        NgbModule\r\n    ],\r\n    exports: [\r\n        AlertDisplayComponent,\r\n        CommonModule,\r\n        FormsModule,\r\n        NotFoundComponent,\r\n        WatershedMapComponent,\r\n        HeaderNavComponent,\r\n        CustomRichTextComponent,\r\n        FieldDefinitionComponent,\r\n        FieldDefinitionGridHeaderComponent\r\n    ],\r\n    entryComponents:[\r\n        WatershedDetailPopupComponent,\r\n    ]\r\n})\r\nexport class SharedModule {\r\n    static forRoot(): ModuleWithProviders<SharedModule> {\r\n    return {\r\n        ngModule: SharedModule,\r\n        providers: []\r\n    };\r\n}\r\n\r\n    static forChild(): ModuleWithProviders<SharedModule> {\r\n    return {\r\n        ngModule: SharedModule,\r\n        providers: []\r\n    };\r\n}\r\n}\r\n","declare var window: any;\r\n\r\nexport class DynamicEnvironment {\r\n    private _production: boolean;\r\n\r\n    constructor(_production: boolean){\r\n        this._production = _production\r\n    }\r\n\r\n    public get production() {\r\n        if (window.config) {\r\n            return window.config.production;\r\n        } else return this._production;\r\n    }\r\n\r\n    public get staging() {\r\n        return window.config.staging;\r\n    }\r\n\r\n    public get dev() {\r\n        return window.config.dev;\r\n    }\r\n\r\n    public get apiHostName() {\r\n        return window.config.apiHostName;\r\n    }\r\n\r\n    public get createAccountUrl() {\r\n        return window.config.createAccountUrl;\r\n    }\r\n\r\n    public get createAccountRedirectUrl() {\r\n        return window.config.createAccountRedirectUrl;\r\n    }\r\n\r\n    public get keystoneSupportBaseUrl() {\r\n        return window.config.keystoneSupportBaseUrl;\r\n    }\r\n\r\n    public get geoserverMapServiceUrl() {\r\n        return window.config.geoserverMapServiceUrl;\r\n    }\r\n\r\n    public get keystoneAuthConfiguration() {\r\n        return window.config.keystoneAuthConfiguration;\r\n    }\r\n\r\n    public get platformLongName(){\r\n        return window.config.platformLongName;\r\n    }\r\n\r\n    public get platformShortName(){\r\n        return window.config.platformShortName;\r\n    }\r\n\r\n    public get leadOrganizationLongName(){\r\n        return window.config.leadOrganizationLongName;\r\n    }\r\n\r\n    public get leadOrganizationShortName(){\r\n        return window.config.leadOrganizationShortName;\r\n    }\r\n\r\n    public get leadOrganizationHomeUrl(){\r\n        return window.config.leadOrganizationHomeUrl;\r\n    }\r\n\r\n    public get faviconFilename(){\r\n        return window.config.faviconFilename;\r\n    }\r\n\r\n    public get leadOrganizationLogoFilename(){\r\n        return window.config.leadOrganizationLogoFilename;\r\n    }\r\n\r\n    public get appInsightsInstrumentationKey() {\r\n        return window.config.appInsightsInstrumentationKey;\r\n    }\r\n}\r\n","import { DynamicEnvironment } from './dynamic-environment';\r\nclass Environment extends DynamicEnvironment {\r\n\r\n  constructor() {\r\n    super(false);\r\n  }\r\n}\r\n\r\nexport const environment = new Environment();","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}